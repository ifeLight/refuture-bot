(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b463db18"],{"454f":function(t,i,e){e("46a7");var n=e("584a").Object;t.exports=function(t,i,e){return n.defineProperty(t,i,e)}},"46a7":function(t,i,e){var n=e("63b6");n(n.S+n.F*!e("8e60"),"Object",{defineProperty:e("d9f6").f})},6453:function(t,i,e){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())},"72bf":function(t,i,e){"use strict";const n=e("6453"),r=e("f234"),s=e("f32c"),o=t=>null===t||void 0===t;function h(t){switch(t.arrayFormat){case"index":return i=>(e,n)=>{const r=e.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?e:null===n?[...e,[l(i,t),"[",r,"]"].join("")]:[...e,[l(i,t),"[",l(r,t),"]=",l(n,t)].join("")]};case"bracket":return i=>(e,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?e:null===n?[...e,[l(i,t),"[]"].join("")]:[...e,[l(i,t),"[]=",l(n,t)].join("")];case"comma":case"separator":return i=>(e,n)=>null===n||void 0===n||0===n.length?e:0===e.length?[[l(i,t),"=",l(n,t)].join("")]:[[e,l(n,t)].join(t.arrayFormatSeparator)];default:return i=>(e,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?e:null===n?[...e,l(i,t)]:[...e,[l(i,t),"=",l(n,t)].join("")]}}function a(t){let i;switch(t.arrayFormat){case"index":return(t,e,n)=>{i=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),i?(void 0===n[t]&&(n[t]={}),n[t][i[1]]=e):n[t]=e};case"bracket":return(t,e,n)=>{i=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),i?void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=[e]:n[t]=e};case"comma":case"separator":return(i,e,n)=>{const r="string"===typeof e&&e.split("").indexOf(t.arrayFormatSeparator)>-1,s=r?e.split(t.arrayFormatSeparator).map(i=>c(i,t)):null===e?e:c(e,t);n[i]=s};default:return(t,i,e)=>{void 0!==e[t]?e[t]=[].concat(e[t],i):e[t]=i}}}function u(t){if("string"!==typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(t,i){return i.encode?i.strict?n(t):encodeURIComponent(t):t}function c(t,i){return i.decode?r(t):t}function f(t){return Array.isArray(t)?t.sort():"object"===typeof t?f(Object.keys(t)).sort((t,i)=>Number(t)-Number(i)).map(i=>t[i]):t}function p(t){const i=t.indexOf("#");return-1!==i&&(t=t.slice(0,i)),t}function v(t){let i="";const e=t.indexOf("#");return-1!==e&&(i=t.slice(e)),i}function d(t){t=p(t);const i=t.indexOf("?");return-1===i?"":t.slice(i+1)}function y(t,i){return i.parseNumbers&&!Number.isNaN(Number(t))&&"string"===typeof t&&""!==t.trim()?t=Number(t):!i.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function m(t,i){i=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},i),u(i.arrayFormatSeparator);const e=a(i),n=Object.create(null);if("string"!==typeof t)return n;if(t=t.trim().replace(/^[?#&]/,""),!t)return n;for(const r of t.split("&")){let[t,o]=s(i.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator"].includes(i.arrayFormat)?o:c(o,i),e(c(t,i),o,n)}for(const r of Object.keys(n)){const t=n[r];if("object"===typeof t&&null!==t)for(const e of Object.keys(t))t[e]=y(t[e],i);else n[r]=y(t,i)}return!1===i.sort?n:(!0===i.sort?Object.keys(n).sort():Object.keys(n).sort(i.sort)).reduce((t,i)=>{const e=n[i];return Boolean(e)&&"object"===typeof e&&!Array.isArray(e)?t[i]=f(e):t[i]=e,t},Object.create(null))}i.extract=d,i.parse=m,i.stringify=(t,i)=>{if(!t)return"";i=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},i),u(i.arrayFormatSeparator);const e=e=>i.skipNull&&o(t[e])||i.skipEmptyString&&""===t[e],n=h(i),r={};for(const o of Object.keys(t))e(o)||(r[o]=t[o]);const s=Object.keys(r);return!1!==i.sort&&s.sort(i.sort),s.map(e=>{const r=t[e];return void 0===r?"":null===r?l(e,i):Array.isArray(r)?r.reduce(n(e),[]).join("&"):l(e,i)+"="+l(r,i)}).filter(t=>t.length>0).join("&")},i.parseUrl=(t,i)=>{i=Object.assign({decode:!0},i);const[e,n]=s(t,"#");return Object.assign({url:e.split("?")[0]||"",query:m(d(t),i)},i&&i.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,i)}:{})},i.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0},e);const n=p(t.url).split("?")[0]||"",r=i.extract(t.url),s=i.parse(r,{sort:!1}),o=Object.assign(s,t.query);let h=i.stringify(o,e);h&&(h="?"+h);let a=v(t.url);return t.fragmentIdentifier&&(a="#"+l(t.fragmentIdentifier,e)),`${n}${h}${a}`}},"85f2":function(t,i,e){t.exports=e("454f")},"8e6e":function(t,i,e){var n=e("5ca1"),r=e("990b"),s=e("6821"),o=e("11e9"),h=e("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var i,e,n=s(t),a=o.f,u=r(n),l={},c=0;while(u.length>c)e=a(n,i=u[c++]),void 0!==e&&h(l,i,e);return l}})},"990b":function(t,i,e){var n=e("9093"),r=e("2621"),s=e("cb7c"),o=e("7726").Reflect;t.exports=o&&o.ownKeys||function(t){var i=n.f(s(t)),e=r.f;return e?i.concat(e(t)):i}},bd86:function(t,i,e){"use strict";e.d(i,"a",(function(){return s}));var n=e("85f2"),r=e.n(n);function s(t,i,e){return i in t?r()(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}},c3d2:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("vx-card",{attrs:{title:"Backtest Single"}},[t._v("\n    "+t._s(t.$route.params.id)+"\n  ")]),e("br"),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-1/2 md:w-1/2 xl:w-1/3"},[e("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"","icon-right":"",icon:"EyeIcon",statistic:t.statistics.roi+"%",statisticTitle:"RoI"}})],1),e("div",{staticClass:"vx-col w-1/2 md:w-1/2 xl:w-1/3"},[e("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"","icon-right":"",icon:"EyeIcon",statistic:t.statistics.winRate,statisticTitle:"Win Rate"}})],1),e("div",{staticClass:"vx-col w-1/2 md:w-1/2 xl:w-1/3"},[e("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"","icon-right":"",icon:"EyeIcon",statistic:t.statistics.trades,statisticTitle:"Total Trades"}})],1),e("div",{staticClass:"vx-col w-1/2 md:w-1/2 xl:w-1/3"},[e("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"","icon-right":"",icon:"EyeIcon",statistic:t.statistics.maximumProfit+"%",statisticTitle:"Maximum Profit"}})],1),e("div",{staticClass:"vx-col w-1/2 md:w-1/2 xl:w-1/3"},[e("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"","icon-right":"",icon:"EyeIcon",statistic:t.statistics.maximumLoss+"%",statisticTitle:"Maximum Loss"}})],1),e("div",{staticClass:"vx-col w-1/2 md:w-1/2 xl:w-1/3"},[e("statistics-card-line",{staticClass:"mb-base",attrs:{hideChart:"","icon-right":"",icon:"EyeIcon",statistic:t.statistics.maximumDrawdown+"%",statisticTitle:"Maximum Drawdown"}})],1)]),e("div",{staticClass:"vx-ro"},[e("div",{staticClass:"vx-col md:w-1/1 w-full mb-base"},[e("trade-candle-chart",{attrs:{title:"Chart",options:t.tradeChartOptions,trades:t.trades}})],1)]),e("br"),e("object-table",{attrs:{title:"Basic Info",data:t.info}}),e("br"),e("object-table",{attrs:{title:"Uncompleted Trade",data:t.uncompletedTrade}}),e("br"),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col md:w-1/1 w-full mb-base"},[e("trades-balances-chart",{attrs:{title:"Trade Balances",trades:t.trades}})],1)]),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col md:w-1/2 w-full mb-base"},[e("profit-fee-chart",{attrs:{title:"Profit-Fee",trades:t.trades}})],1),e("div",{staticClass:"vx-col md:w-1/2 w-full mb-base"},[e("profits-variation-chart",{attrs:{title:"Profit Variation",trades:t.trades}})],1)]),e("br"),e("strategies-list",{attrs:{list:t.indicators,title:"Indicators",type:"Indicator"}}),e("br"),e("strategies-list",{attrs:{list:t.safeties,title:"Safeties",type:"Safeties"}}),e("br"),e("trades-table",{attrs:{trades:t.trades,title:"Trades Completed"}}),e("br")],1)},r=[],s=(e("c5f6"),e("5a0c")),o=e.n(s),h=e("871e"),a=e("53a6"),u=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("vx-card",{attrs:{title:t.title}},[e("vs-table",{attrs:{data:t.trades,maxItems:15,pagination:!0},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.data;return t._l(n,(function(i,r){return e("vs-tr",{key:r,attrs:{state:"long"==i.type?"success":"danger"}},[e("vs-td",{attrs:{data:n[r].type}},[t._v("\n          "+t._s(n[r].type)+"\n      ")]),e("vs-td",{attrs:{data:n[r].entryTime}},[t._v("\n        "+t._s(t.dayjs(new Date(n[r].entryTime)).format("DD-MM-YYYY/HH:mm:ss"))+"\n      ")]),e("vs-td",{attrs:{data:n[r].closeTime}},[t._v("\n        "+t._s(t.dayjs(new Date(n[r].closeTime)).format("DD-MM-YYYY/HH:mm:ss"))+"\n      ")]),e("vs-td",{attrs:{data:n[r].entry}},[t._v("\n        "+t._s(n[r].entry)+"\n      ")]),e("vs-td",{attrs:{data:n[r].close}},[t._v("\n        "+t._s(n[r].close)+"\n      ")]),e("vs-td",{attrs:{data:n[r].fee}},[t._v("\n        "+t._s(parseFloat(n[r].fee).toFixed(2))+"\n      ")]),e("vs-td",{attrs:{data:n[r].closedBy}},[t._v("\n        "+t._s(n[r].closedBy)+"\n      ")]),e("vs-td",{attrs:{data:n[r].currentBalance}},[t._v("\n        "+t._s(parseFloat(n[r].currentBalance).toFixed(2))+"\n      ")]),e("vs-td",{attrs:{data:n[r].profit}},[t._v("\n        "+t._s(parseFloat(n[r].profit).toFixed(2))+"\n      ")]),e("vs-td",{attrs:{data:n[r].profitInPercentage}},[t._v("\n        "+t._s(parseFloat(n[r].profitInPercentage).toFixed(2))+"\n      ")])],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("Type")]),e("vs-th",[t._v("Entry Time")]),e("vs-th",[t._v("Close Time")]),e("vs-th",[t._v("Entry Price")]),e("vs-th",[t._v("Close Price")]),e("vs-th",[t._v("Fee")]),e("vs-th",[t._v("Closed By")]),e("vs-th",[t._v("After Balance")]),e("vs-th",[t._v("Profit $")]),e("vs-th",[t._v("Profit %")])],1)],2)],1)},l=[],c={props:["title","trades"],data:function(){return{dayjs:o.a}},mounted:function(){}},f=c,p=e("2877"),v=Object(p["a"])(f,u,l,!1,null,null,null),d=v.exports,y=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("vx-card",{attrs:{title:t.title}},[[e("vue-apex-charts",{attrs:{type:"line",height:"350",options:t.chartOptions,series:t.series}})]],2)},m=[],g=(e("8e6e"),e("456d"),e("bd86")),b=(e("ac6a"),e("1321")),w=e.n(b);function M(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?M(Object(e),!0).forEach((function(i){Object(g["a"])(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):M(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var _={components:{VueApexCharts:w.a},data:function(){return{series:[{name:"Balances",data:[]}],chartOptions:{chart:{height:300,zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Balances Variation",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{type:"datetime",categories:[]}}}},props:["trades","title"],watch:{trades:function(t){this.recreate(t)}},methods:{recreateSeries:function(t){var i=[];t.forEach((function(t){i.push(Number(t.currentBalance).toFixed(2))})),this.series=[{name:"Balances",data:i}]},recreateXaxis:function(t){var i=[];t.forEach((function(t){i.push(t.closeDate)}));var e={type:"datetime",categories:i};this.chartOptions=x(x({},this.chartOptions),{xaxis:e})},recreate:function(t){t&&Array.isArray(t)&&(this.recreateSeries(t),this.recreateXaxis(t))}},created:function(){this.recreate(this.trades)}},S=_,P=Object(p["a"])(S,y,m,!1,null,null,null),C=P.exports,T=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("vx-card",{attrs:{title:t.title}},[[e("vue-apex-charts",{attrs:{type:"line",options:t.chartOptions,series:t.series}})]],2)},L=[];function O(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?O(Object(e),!0).forEach((function(i){Object(g["a"])(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):O(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var k={components:{VueApexCharts:w.a},data:function(){return{series:[{name:"Profits",data:[]},{name:"Fees",data:[]}],chartOptions:{chart:{height:400,zoom:{enabled:!0}},markers:{size:1},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Profits-Fee Variation",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{type:"datetime",categories:[]}}}},props:["trades","title"],watch:{trades:function(t){this.recreate(t)}},methods:{recreateSeries:function(t){var i=[],e=[];t.forEach((function(t){i.push(Number(t.profit).toFixed(2)),e.push(Number(t.fee).toFixed(2))})),this.series=[{name:"Profits",data:i},{name:"Fees",data:e}]},recreateXaxis:function(t){var i=[];t.forEach((function(t){i.push(t.closeDate)}));var e={type:"datetime",categories:i};this.chartOptions=E(E({},this.chartOptions),{xaxis:e})},recreate:function(t){t&&Array.isArray(t)&&(this.recreateSeries(t),this.recreateXaxis(t))}},created:function(){this.recreate(this.trades)}},D=k,z=Object(p["a"])(D,T,L,!1,null,null,null),G=z.exports,j=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("vx-card",{attrs:{title:t.title}},[[e("vue-apex-charts",{attrs:{type:"line",options:t.chartOptions,series:t.series}})]],2)},V=[];function N(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?N(Object(e),!0).forEach((function(i){Object(g["a"])(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):N(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var I={components:{VueApexCharts:w.a},data:function(){return{series:[{name:"Profits",data:[]}],chartOptions:{chart:{height:400,zoom:{enabled:!0}},markers:{size:1},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Profits Variation %",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{type:"datetime",categories:[]}}}},props:["trades","title"],watch:{trades:function(t){this.recreate(t)}},methods:{recreateSeries:function(t){var i=[];t.forEach((function(t){i.push(Number(t.profitInPercentage).toFixed(2))})),this.series=[{name:"Profits%",data:i}]},recreateXaxis:function(t){var i=[];t.forEach((function(t){i.push(new Date(t.closeDate))}));var e={type:"datetime",categories:i};this.chartOptions=R(R({},this.chartOptions),{xaxis:e})},recreate:function(t){t&&Array.isArray(t)&&(this.recreateSeries(t),this.recreateXaxis(t))}},created:function(){this.recreate(this.trades)}},F=I,B=Object(p["a"])(F,j,V,!1,null,null,null),A=B.exports,X=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("vx-card",{attrs:{title:t.title}},[e("div",[e("div",{attrs:{id:t.chartId}})])])},J=[],W={allowDownsampling:!0};function Q(t,i){return void 0===i&&(i=W),new Y(t,i)}var U,q,Y=function(){function t(t,i){var e=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return e._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();
/*!
 * @license
 * TradingView Lightweight Charts v3.1.5
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */function H(t,i){var e,n=((e={})[0]=[],e[1]=[t.lineWidth,t.lineWidth],e[2]=[2*t.lineWidth,2*t.lineWidth],e[3]=[6*t.lineWidth,6*t.lineWidth],e[4]=[t.lineWidth,4*t.lineWidth],e)[i];t.setLineDash(n)}function Z(t,i,e,n){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(e,i+r),t.lineTo(n,i+r),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(U||(U={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(q||(q={}));var K=function(t,i){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function $(t,i){function e(){this.constructor=t}K(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}var tt=function(){return(tt=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var r in i=arguments[e])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}).apply(this,arguments)};function it(){for(var t=0,i=0,e=arguments.length;i<e;i++)t+=arguments[i].length;var n=Array(t),r=0;for(i=0;i<e;i++)for(var s=arguments[i],o=0,h=s.length;o<h;o++,r++)n[r]=s[o];return n}function et(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function nt(t){if(void 0===t)throw new Error("Value is undefined");return t}function rt(t){if(null===t)throw new Error("Value is null");return t}function st(t){return rt(nt(t))}function ot(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];for(var n=0,r=i;n<r.length;n++){var s=r[n];for(var o in s)void 0!==s[o]&&("object"!=typeof s[o]||void 0===t[o]?t[o]=s[o]:ot(t[o],s[o]))}return t}function ht(t){return"number"==typeof t&&isFinite(t)}function at(t){return"number"==typeof t&&t%1==0}function ut(t){return"string"==typeof t}function lt(t){return"boolean"==typeof t}function ct(t){var i,e,n,r=t;if(!r||"object"!=typeof r)return r;for(e in i=Array.isArray(r)?[]:{},r)r.hasOwnProperty(e)&&(n=r[e],i[e]=n&&"object"==typeof n?ct(n):n);return i}function ft(t){return null!==t}function pt(t){return null===t?void 0:t}var vt,dt,yt,mt=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,e,n){this.t.forEach((function(r){t.save(),r.h(t,i,e,n),t.restore()}))},t}(),gt=function(){function t(){}return t.prototype.h=function(t,i,e,n){t.save(),t.scale(i,i),this.s(t,e,n),t.restore()},t.prototype.u=function(t,i,e,n){t.save(),t.scale(i,i),this.o(t,e,n),t.restore()},t.prototype.o=function(t,i,e){},t}(),bt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.l=null,i}return $(i,t),i.prototype.v=function(t){this.l=t},i.prototype.s=function(t){if(null!==this.l&&null!==this.l._){var i=this.l._,e=this.l,n=function(n){t.beginPath();for(var r=i.to-1;r>=i.from;--r){var s=e.M[r];t.moveTo(s.m,s.g),t.arc(s.m,s.g,n,0,2*Math.PI)}t.fill()};t.fillStyle=e.p,n(e.k+2),t.fillStyle=e.N,n(e.k)}},i}(gt),wt={from:0,to:1},Mt=function(){function t(t,i){this.S=new mt,this.D=[],this.C=[],this.T=!0,this.A=t,this.L=i,this.S.i(this.D)}return t.prototype.B=function(t){var i=this,e=this.A.F();e.length!==this.D.length&&(this.C=e.map((function(){return{M:[{m:0,g:0,V:0,O:0}],N:"",p:i.A.P().layout.backgroundColor,k:0,_:null}})),this.D=this.C.map((function(t){var i=new bt;return i.v(t),i})),this.S.i(this.D)),this.T=!0},t.prototype.I=function(t,i,e){return this.T&&(this.W(),this.T=!1),this.S},t.prototype.W=function(){var t=this,i=this.A.F(),e=this.L.R(),n=this.A.j();i.forEach((function(i,r){var s=t.C[r],o=i.U(e);if(null!==o){var h=rt(i.q());s.N=i.K().Y(e).H,s.p=t.A.P().layout.backgroundColor,s.k=o.k,s.M[0].O=o.O,s.M[0].g=i.X().$(o.O,h.Z),s.M[0].V=e,s.M[0].m=n.J(e),s._=wt}else s._=null}))},t}(),xt=function(){function t(t){this.G=t}return t.prototype.h=function(t,i,e,n){if(null!==this.G){var r=this.G.it.tt,s=this.G.nt.tt;if(r||s){t.save();var o=Math.round(this.G.m*i),h=Math.round(this.G.g*i),a=Math.ceil(this.G.ht*i),u=Math.ceil(this.G.st*i);t.lineCap="butt",r&&o>=0&&(t.lineWidth=Math.floor(this.G.it.rt*i),t.strokeStyle=this.G.it.et,t.fillStyle=this.G.it.et,H(t,this.G.it.ut),function(t,i,e,n){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(i+r,e),t.lineTo(i+r,n),t.stroke()}(t,o,0,u)),s&&h>=0&&(t.lineWidth=Math.floor(this.G.nt.rt*i),t.strokeStyle=this.G.nt.et,t.fillStyle=this.G.nt.et,H(t,this.G.nt.ut),Z(t,h,0,a)),t.restore()}}},t}(),_t=function(){function t(t){this.T=!0,this.at={it:{rt:1,ut:0,et:"",tt:!1},nt:{rt:1,ut:0,et:"",tt:!1},ht:0,st:0,m:0,g:0},this.ot=new xt(this.at),this.lt=t}return t.prototype.B=function(){this.T=!0},t.prototype.I=function(t,i){return this.T&&(this.W(),this.T=!1),this.ot},t.prototype.W=function(){var t=this.lt.tt(),i=rt(this.lt.ft()),e=i.ct().P().crosshair,n=this.at;n.nt.tt=t&&this.lt.vt(i),n.it.tt=t&&this.lt._t(),n.nt.rt=e.horzLine.width,n.nt.ut=e.horzLine.style,n.nt.et=e.horzLine.color,n.it.rt=e.vertLine.width,n.it.ut=e.vertLine.style,n.it.et=e.vertLine.color,n.ht=i.dt(),n.st=i.wt(),n.m=this.lt.Mt(),n.g=this.lt.bt()},t}(),St={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Pt(t){return function(t,i,e){return(n=i)<=0||n>0?i<t?t:i>e?e:Math.round(i):t;var n}(0,t,255)}function Ct(t){if("transparent"===(t=t.toLowerCase()))return[0,0,0];t in St&&(t=St[t]);var i=function(t){var i=yt.rgbaRe.exec(t)||yt.rgbRe.exec(t);return null!==i?yt.parse(i):null}(t);if(null!==i)return i;var e,n,r=(e=t,null!==(n=dt.re.exec(e))?dt.parse(n):null);if(null!==r)return r;var s=function(t){var i=vt.re.exec(t);return null!==i?vt.parse(i):null}(t);if(null!==s)return s;throw new Error("Cannot parse color: "+t)}function Tt(t){var i,e=Ct(t);return{gt:"rgb("+e[0]+", "+e[1]+", "+e[2]+")",pt:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function Lt(t,i,e,n,r,s){t.fillRect(i,e,s,r),t.fillRect(i+s,e,n-2*s,s),t.fillRect(i+s,e+r-s,n-2*s,s),t.fillRect(i+n-s,e,s,r)}function Ot(t,i,e){t.save(),t.scale(i,i),e(),t.restore()}function Et(t,i,e,n,r,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(i,e,n,r),t.restore()}!function(t){t.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/,t.parse=function(t){return[Pt(parseInt(t[1]+t[1],16)),Pt(parseInt(t[2]+t[2],16)),Pt(parseInt(t[3]+t[3],16))]}}(vt||(vt={})),function(t){t.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/,t.parse=function(t){return[Pt(parseInt(t[1],16)),Pt(parseInt(t[2],16)),Pt(parseInt(t[3],16))]}}(dt||(dt={})),function(t){t.rgbRe=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,t.rgbaRe=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,t.parse=function(t){return[Pt(parseInt(t[1],10)),Pt(parseInt(t[2],10)),Pt(parseInt(t[3],10))]}}(yt||(yt={}));var kt,Dt=function(){function t(t,i){this.v(t,i)}return t.prototype.v=function(t,i){this.G=t,this.yt=i},t.prototype.h=function(t,i,e,n,r,s){if(this.G.tt){t.font=i.kt;var o=this.G.xt||!this.G.Nt?i.St:0,h=i.Dt,a=i.Ct,u=i.Tt,l=i.At,c=i.Et,f=this.G.Lt,p=Math.ceil(e.Bt(t,f)),v=i.Ft,d=i.Vt+a+u,y=Math.ceil(.5*d),m=h+p+l+c+o,g=this.yt.zt;this.yt.Ot&&(g=this.yt.Ot);var b,w,M=(g=Math.round(g))-y,x=M+d,_="right"===r,S=_?n:0,P=Math.ceil(n*s),C=S;if(t.fillStyle=this.yt.gt,t.lineWidth=1,t.lineCap="butt",f){_?(b=S-o,w=(C=S-m)+c):(C=S+m,b=S+o,w=S+h+o+l);var T=Math.max(1,Math.floor(s)),L=Math.max(1,Math.floor(h*s)),O=_?P:0,E=Math.round(M*s),k=Math.round(C*s),D=Math.round(g*s)-Math.floor(.5*s),z=D+T+(D-E),G=Math.round(b*s);t.save(),t.beginPath(),t.moveTo(O,E),t.lineTo(k,E),t.lineTo(k,z),t.lineTo(O,z),t.fill(),t.fillStyle=this.G.Pt,t.fillRect(_?P-L:0,E,L,z-E),this.G.xt&&(t.fillStyle=this.yt.et,t.fillRect(O,D,G-O,T)),t.textAlign="left",t.fillStyle=this.yt.et,Ot(t,s,(function(){t.fillText(f,w,x-u-v)})),t.restore()}}},t.prototype.wt=function(t,i){return this.G.tt?t.Vt+t.Ct+t.Tt:0},t}(),zt=function(){function t(t){this.It={zt:0,et:"#FFF",gt:"#000"},this.Wt={Lt:"",tt:!1,xt:!0,Nt:!1,Pt:""},this.Rt={Lt:"",tt:!1,xt:!1,Nt:!0,Pt:""},this.T=!0,this.jt=new(t||Dt)(this.Wt,this.It),this.Ut=new(t||Dt)(this.Rt,this.It)}return t.prototype.Lt=function(){return this.Wt.Lt},t.prototype.zt=function(){return this.qt(),this.It.zt},t.prototype.B=function(){this.T=!0},t.prototype.wt=function(t,i){return void 0===i&&(i=!1),Math.max(this.jt.wt(t,i),this.Ut.wt(t,i))},t.prototype.Ht=function(){return this.It.Ot||0},t.prototype.Yt=function(t){this.It.Ot=t},t.prototype.Kt=function(){return this.qt(),this.Wt.tt||this.Rt.tt},t.prototype.$t=function(){return this.qt(),this.Wt.tt},t.prototype.I=function(t){return this.qt(),this.Wt.xt=this.Wt.xt&&t.P().drawTicks,this.Rt.xt=this.Rt.xt&&t.P().drawTicks,this.jt.v(this.Wt,this.It),this.Ut.v(this.Rt,this.It),this.jt},t.prototype.Xt=function(){return this.qt(),this.jt.v(this.Wt,this.It),this.Ut.v(this.Rt,this.It),this.Ut},t.prototype.qt=function(){this.T&&(this.Wt.xt=!0,this.Rt.xt=!1,this.Zt(this.Wt,this.Rt,this.It))},t}(),Gt=function(t){function i(i,e,n){var r=t.call(this)||this;return r.lt=i,r.Jt=e,r.Gt=n,r}return $(i,t),i.prototype.Zt=function(t,i,e){t.tt=!1;var n=this.lt.P().horzLine;if(n.labelVisible){var r=this.Jt.q();if(this.lt.tt()&&!this.Jt.Qt()&&null!==r){var s=Tt(n.labelBackgroundColor);e.gt=s.gt,e.et=s.pt;var o=this.Gt(this.Jt);e.zt=o.zt,t.Lt=this.Jt.ti(o.O,r),t.tt=!0}}},i}(zt),jt=/[1-9]/g,Vt=function(){function t(){this.G=null}return t.prototype.v=function(t){this.G=t},t.prototype.h=function(t,i,e){var n=this;if(null!==this.G&&!1!==this.G.tt&&0!==this.G.Lt.length){t.font=i.kt;var r=Math.round(i.ii.Bt(t,this.G.Lt,jt));if(!(r<=0)){t.save();var s=i.ni,o=r+2*s,h=o/2,a=this.G.dt,u=this.G.zt,l=Math.floor(u-h)+.5;l<0?(u+=Math.abs(0-l),l=Math.floor(u-h)+.5):l+o>a&&(u-=Math.abs(a-(l+o)),l=Math.floor(u-h)+.5);var c=l+o,f=0+i.Dt+i.Ct+i.Vt+i.Tt;t.fillStyle=this.G.gt;var p=Math.round(l*e),v=Math.round(0*e),d=Math.round(c*e),y=Math.round(f*e);t.fillRect(p,v,d-p,y-v);var m=Math.round(this.G.zt*e),g=v,b=Math.round((g+i.Dt+i.St)*e);t.fillStyle=this.G.et;var w=Math.max(1,Math.floor(e)),M=Math.floor(.5*e);t.fillRect(m-M,g,w,b-g);var x=f-i.Ft-i.Tt;t.textAlign="left",t.fillStyle=this.G.et,Ot(t,e,(function(){t.fillText(rt(n.G).Lt,l+s,x)})),t.restore()}}},t}(),Nt=function(){function t(t,i,e){this.T=!0,this.ot=new Vt,this.at={tt:!1,gt:"#4c525e",et:"white",Lt:"",dt:0,zt:NaN},this.L=t,this.hi=i,this.Gt=e}return t.prototype.B=function(){this.T=!0},t.prototype.I=function(){return this.T&&(this.W(),this.T=!1),this.ot.v(this.at),this.ot},t.prototype.W=function(){var t=this.at;t.tt=!1;var i=this.L.P().vertLine;if(i.labelVisible){var e=this.hi.j();if(!e.Qt()){var n=e.si(this.L.R());t.dt=e.dt();var r=this.Gt();if(r.V){t.zt=r.zt,t.Lt=e.ri(rt(n)),t.tt=!0;var s=Tt(i.labelBackgroundColor);t.gt=s.gt,t.et=s.pt}}}},t}(),Rt=function(){function t(){this.ei=null,this.ui=0}return t.prototype.ai=function(){return this.ui},t.prototype.oi=function(t){this.ui=t},t.prototype.X=function(){return this.ei},t.prototype.li=function(t){this.ei=t},t.prototype.fi=function(t,i){return[]},t.prototype.ci=function(t){return[]},t.prototype.vi=function(){return[]},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(kt||(kt={}));var It=function(t){function i(i,e){var n,r,s=t.call(this)||this;s._i=null,s.di=NaN,s.wi=0,s.Mi=!0,s.bi=new Map,s.mi=!1,s.gi=NaN,s.pi=NaN,s.yi=NaN,s.ki=NaN,s.hi=i,s.xi=e,s.Ni=new Mt(i,s),s.Si=(n=function(){return s.di},r=function(){return s.pi},function(t){var i=r(),e=n();if(t===rt(s._i).Di())return{O:e,zt:i};var o=rt(t.q());return{O:t.Ci(i,o),zt:i}});var o=function(t,i){return function(){return{V:s.hi.j().si(t()),zt:i()}}}((function(){return s.wi}),(function(){return s.Mt()}));return s.Ti=new Nt(s,i,o),s.Ai=new _t(s),s}return $(i,t),i.prototype.P=function(){return this.xi},i.prototype.Ei=function(t,i){this.yi=t,this.ki=i},i.prototype.Li=function(){this.yi=NaN,this.ki=NaN},i.prototype.Bi=function(){return this.yi},i.prototype.Fi=function(){return this.ki},i.prototype.Vi=function(t,i,e){this.mi||(this.mi=!0),this.Mi=!0,this.zi(t,i,e)},i.prototype.R=function(){return this.wi},i.prototype.Mt=function(){return this.gi},i.prototype.bt=function(){return this.pi},i.prototype.tt=function(){return this.Mi},i.prototype.Oi=function(){this.Mi=!1,this.Pi(),this.di=NaN,this.gi=NaN,this.pi=NaN,this._i=null,this.Li()},i.prototype.ci=function(t){return null!==this._i?[this.Ai,this.Ni]:[]},i.prototype.vt=function(t){return t===this._i&&this.xi.horzLine.visible},i.prototype._t=function(){return this.xi.vertLine.visible},i.prototype.fi=function(t,i){this.Mi&&this._i===t||this.bi.clear();var e=[];return this._i===t&&e.push(this.Ii(this.bi,i,this.Si)),e},i.prototype.vi=function(){return this.Mi?[this.Ti]:[]},i.prototype.ft=function(){return this._i},i.prototype.Wi=function(){this.Ai.B(),this.bi.forEach((function(t){return t.B()})),this.Ti.B(),this.Ni.B()},i.prototype.Ri=function(t){return t&&!t.Di().Qt()?t.Di():null},i.prototype.zi=function(t,i,e){this.ji(t,i,e)&&this.Wi()},i.prototype.ji=function(t,i,e){var n=this.gi,r=this.pi,s=this.di,o=this.wi,h=this._i,a=this.Ri(e);this.wi=t,this.gi=isNaN(t)?NaN:this.hi.j().J(t),this._i=e;var u=null!==a?a.q():null;return null!==a&&null!==u?(this.di=i,this.pi=a.$(i,u)):(this.di=NaN,this.pi=NaN),n!==this.gi||r!==this.pi||o!==this.wi||s!==this.di||h!==this._i},i.prototype.Pi=function(){var t=this.hi.F().map((function(t){return t.qi().Ui()})).filter(ft),i=0===t.length?null:Math.max.apply(Math,t);this.wi=null!==i?i:NaN},i.prototype.Ii=function(t,i,e){var n=t.get(i);return void 0===n&&(n=new Gt(this,i,e),t.set(i,n)),n},i}(Rt),Ft=".",Bt="'";function At(t,i){if(!ht(t))return"n/a";if(!at(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var Xt=function(){function t(t,i,e,n){if(i||(i=1),ht(t)&&at(t)||(t=100),t<0)throw new TypeError("invalid base");this.Jt=t,this.Hi=i,this.Yi=n,e&&void 0!==n&&n>0&&2!==n&&4!==n&&8!==n||(this.Ki=e,this.$i())}return t.prototype.Xi=function(t){var i=t<0?"−":"";return t=Math.abs(t),this.Ki?i+this.Zi(t):i+this.Ji(t)},t.prototype.$i=function(){if(this.Gi=0,this.Jt>0&&this.Hi>0){var t=this.Jt;for(this.Ki&&this.Yi&&(t/=this.Yi);t>1;)t/=10,this.Gi++}},t.prototype.Ji=function(t){var i;i=this.Ki?Math.pow(10,this.Gi||0):this.Jt/this.Hi;var e=Math.floor(t),n="",r=void 0!==this.Gi?this.Gi:NaN;if(i>1){var s=+(Math.round(t*i)-e*i).toFixed(this.Gi);s>=i&&(s-=i,e+=1),n=Ft+At(+s.toFixed(this.Gi)*this.Hi,r)}else e=Math.round(e*i)/i,r>0&&(n=Ft+At(0,r));return e.toFixed(0)+n},t.prototype.Zi=function(t){var i=this.Jt/this.Hi,e=Math.floor(t),n=Math.round(t*i)-e*i;if(n===i&&(n=0,e+=1),!this.Gi)throw new Error("_fractionalLength is not calculated");var r="";if(this.Yi){var s=n%this.Yi,o=At(n=(n-s)/this.Yi,this.Gi),h=2===this.Yi?["0","5"][s]:8===this.Yi?["0","1","2","3","4","5","6","7"][s]:["0","2","5","7"][s];r=o+Bt+h}else r=At(n*this.Hi,this.Gi);return e.toString()+Bt+r},t}(),Jt=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return $(i,t),i.prototype.Xi=function(i){return t.prototype.Xi.call(this,i)+"%"},i}(Xt),Wt=function(){function t(){this.Qi=[]}return t.prototype.tn=function(t,i,e){var n={in:t,nn:i,hn:!0===e};this.Qi.push(n)},t.prototype.sn=function(t){var i=this.Qi.findIndex((function(i){return t===i.in}));i>-1&&this.Qi.splice(i,1)},t.prototype.rn=function(t){this.Qi=this.Qi.filter((function(i){return i.nn===t}))},t.prototype.en=function(t,i){var e=it(this.Qi);this.Qi=this.Qi.filter((function(t){return!t.hn})),e.forEach((function(e){return e.in(t,i)}))},t.prototype.un=function(){return this.Qi.length>0},t.prototype.an=function(){this.Qi=[]},t}(),Qt=function(){function t(t,i){this.on=t,this.ln=i}return t.prototype.fn=function(t){return null!==t&&this.on===t.on&&this.ln===t.ln},t.prototype.cn=function(){return new t(this.on,this.ln)},t.prototype.vn=function(){return this.on},t.prototype._n=function(){return this.ln},t.prototype.dn=function(){return this.ln-this.on},t.prototype.Qt=function(){return this.ln===this.on||Number.isNaN(this.ln)||Number.isNaN(this.on)},t.prototype.wn=function(i){return null===i?this:new t(Math.min(this.vn(),i.vn()),Math.max(this._n(),i._n()))},t.prototype.Mn=function(t){if(ht(t)&&0!==this.ln-this.on){var i=.5*(this.ln+this.on),e=this.ln-i,n=this.on-i;e*=t,n*=t,this.ln=i+e,this.on=i+n}},t.prototype.bn=function(t){ht(t)&&(this.ln+=t,this.on+=t)},t.prototype.mn=function(){return{minValue:this.on,maxValue:this.ln}},t.gn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function Ut(t,i,e){return Math.min(Math.max(t,i),e)}function qt(t,i,e){return i-t<=e}function Yt(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function Ht(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function Zt(t){var i=Math.ceil(t);return i%2==0?i-1:i}function Kt(t,i){var e=100*(t-i)/i;return i<0?-e:e}function $t(t,i){var e=Kt(t.vn(),i),n=Kt(t._n(),i);return new Qt(e,n)}function ti(t,i){var e=100*(t-i)/i+100;return i<0?-e:e}function ii(t,i){var e=ti(t.vn(),i),n=ti(t._n(),i);return new Qt(e,n)}function ei(t){var i=Math.abs(t);if(i<1e-8)return 0;var e=Yt(i+1e-4)+4;return t<0?-e:e}function ni(t){var i=Math.abs(t);if(i<1e-8)return 0;var e=Math.pow(10,i-4)-1e-4;return t<0?-e:e}function ri(t){if(null===t)return null;var i=ei(t.vn()),e=ei(t._n());return new Qt(i,e)}var si,oi=function(){function t(t,i){if(this.pn=t,this.yn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.pn))this.kn=[2,2.5,2];else{this.kn=[];for(var e=this.pn;1!==e;){if(e%2==0)this.kn.push(2),e/=2;else{if(e%5!=0)throw new Error("unexpected base");this.kn.push(2),this.kn.push(2.5),e/=5}if(this.kn.length>100)throw new Error("something wrong with base")}}}return t.prototype.xn=function(t,i,e){for(var n,r,s,o=0===this.pn?0:1/this.pn,h=Math.pow(10,Math.max(0,Math.ceil(Yt(t-i)))),a=0,u=this.yn[0];;){var l=qt(h,o,1e-9)&&h>o+1e-9,c=qt(h,e*u,1e-9),f=qt(h,1,1e-9);if(!(l&&c&&f))break;h/=u,u=this.yn[++a%this.yn.length]}if(h<=o+1e-9&&(h=o),h=Math.max(1,h),this.kn.length>0&&(n=h,r=1,s=1e-9,Math.abs(n-r)<s))for(a=0,u=this.kn[0];qt(h,e*u,1e-9)&&h>o+1e-9;)h/=u,u=this.kn[++a%this.kn.length];return h},t}(),hi=function(){function t(t,i,e,n){this.Nn=[],this.Jt=t,this.pn=i,this.Sn=e,this.Dn=n}return t.prototype.xn=function(t,i){if(t<i)throw new Error("high < low");var e=this.Jt.wt(),n=(t-i)*this.Cn()/e,r=new oi(this.pn,[2,2.5,2]),s=new oi(this.pn,[2,2,2.5]),o=new oi(this.pn,[2.5,2,2]),h=[];return h.push(r.xn(t,i,n)),h.push(s.xn(t,i,n)),h.push(o.xn(t,i,n)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],e=1;e<t.length;++e)t[e]<i&&(i=t[e]);return i}(h)},t.prototype.Tn=function(){var t=this.Jt,i=t.q();if(null!==i){var e=t.wt(),n=this.Sn(e-1,i),r=this.Sn(0,i),s=this.Jt.P().entireTextOnly?this.An()/2:0,o=s,h=e-1-s,a=Math.max(n,r),u=Math.min(n,r);if(a!==u){for(var l=this.xn(a,u),c=a%l,f=a>=u?1:-1,p=null,v=0,d=a-(c+=c<0?l:0);d>u;d-=l){var y=this.Dn(d,i,!0);null!==p&&Math.abs(y-p)<this.Cn()||y<o||y>h||(v<this.Nn.length?(this.Nn[v].En=y,this.Nn[v].Ln=t.Bn(d)):this.Nn.push({En:y,Ln:t.Bn(d)}),v++,p=y,t.Fn()&&(l=this.xn(d*f,u)))}this.Nn.length=v}else this.Nn=[]}else this.Nn=[]},t.prototype.Vn=function(){return this.Nn},t.prototype.An=function(){return this.Jt.Vt()},t.prototype.Cn=function(){return Math.ceil(2.5*this.An())},t}();function ai(t){return t.slice().sort((function(t,i){return rt(t.ai())-rt(i.ai())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(si||(si={}));var ui,li=new Jt,ci=new Xt(100,1),fi=function(){function t(t,i,e,n){this.zn=0,this.On=null,this.Pn=null,this.In=null,this.Wn={Rn:!1,jn:null},this.Un=0,this.qn=0,this.Hn=new Wt,this.Yn=new Wt,this.Kn=[],this.$n=null,this.Xn=null,this.Zn=null,this.Jn=null,this.Gn=ci,this.Qn=t,this.xi=i,this.th=e,this.ih=n,this.nh=new hi(this,100,this.hh.bind(this),this.sh.bind(this))}return t.prototype.rh=function(){return this.Qn},t.prototype.P=function(){return this.xi},t.prototype.eh=function(t){if(ot(this.xi,t),this.uh(),void 0!==t.mode&&this.ah({oh:t.mode}),void 0!==t.scaleMargins){var i=nt(t.scaleMargins.top),e=nt(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(e<0||e>1||i+e>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+e);if(i+e>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+e));this.lh(),this.Xn=null}},t.prototype.fh=function(){return this.xi.autoScale},t.prototype.Fn=function(){return 1===this.xi.mode},t.prototype.vh=function(){return 2===this.xi.mode},t.prototype._h=function(){return 3===this.xi.mode},t.prototype.oh=function(){return{dh:this.xi.autoScale,wh:this.xi.invertScale,oh:this.xi.mode}},t.prototype.ah=function(t){var i=this.oh(),e=null;void 0!==t.dh&&(this.xi.autoScale=t.dh),void 0!==t.oh&&(this.xi.mode=t.oh,2!==t.oh&&3!==t.oh||(this.xi.autoScale=!0),this.Wn.Rn=!1),1===i.oh&&t.oh!==i.oh&&(function(t){if(null===t)return!1;var i=ni(t.vn()),e=ni(t._n());return isFinite(i)&&isFinite(e)}(this.Pn)?null!==(e=function(t){if(null===t)return null;var i=ni(t.vn()),e=ni(t._n());return new Qt(i,e)}(this.Pn))&&this.Mh(e):this.xi.autoScale=!0),1===t.oh&&t.oh!==i.oh&&null!==(e=ri(this.Pn))&&this.Mh(e);var n=i.oh!==this.xi.mode;n&&(2===i.oh||this.vh())&&this.uh(),n&&(3===i.oh||this._h())&&this.uh(),void 0!==t.wh&&i.wh!==t.wh&&(this.xi.invertScale=t.wh,this.bh()),this.Yn.en(i,this.oh())},t.prototype.mh=function(){return this.Yn},t.prototype.Vt=function(){return this.th.fontSize},t.prototype.wt=function(){return this.zn},t.prototype.gh=function(t){this.zn!==t&&(this.zn=t,this.lh(),this.Xn=null)},t.prototype.ph=function(){if(this.On)return this.On;var t=this.wt()-this.yh()-this.kh();return this.On=t,t},t.prototype.xh=function(){return this.Nh(),this.Pn},t.prototype.Mh=function(t,i){var e=this.Pn;(i||null===e&&null!==t||null!==e&&!e.fn(t))&&(this.Xn=null,this.Pn=t)},t.prototype.Qt=function(){return this.Nh(),0===this.zn||!this.Pn||this.Pn.Qt()},t.prototype.Sh=function(t){return this.wh()?t:this.wt()-1-t},t.prototype.$=function(t,i){return this.vh()?t=Kt(t,i):this._h()&&(t=ti(t,i)),this.sh(t,i)},t.prototype.Dh=function(t,i,e){this.Nh();for(var n=this.kh(),r=rt(this.xh()),s=r.vn(),o=r._n(),h=this.ph()-1,a=this.wh(),u=h/(o-s),l=void 0===e?0:e.from,c=void 0===e?t.length:e.to,f=this.Ch(),p=l;p<c;p++){var v=t[p],d=v.O;if(!isNaN(d)){var y=d;null!==f&&(y=f(v.O,i));var m=n+u*(y-s),g=a?m:this.zn-1-m;v.g=g}}},t.prototype.Th=function(t,i,e){this.Nh();for(var n=this.kh(),r=rt(this.xh()),s=r.vn(),o=r._n(),h=this.ph()-1,a=this.wh(),u=h/(o-s),l=void 0===e?0:e.from,c=void 0===e?t.length:e.to,f=this.Ch(),p=l;p<c;p++){var v=t[p],d=v.open,y=v.high,m=v.low,g=v.close;null!==f&&(d=f(v.open,i),y=f(v.high,i),m=f(v.low,i),g=f(v.close,i));var b=n+u*(d-s),w=a?b:this.zn-1-b;v.Ah=w,b=n+u*(y-s),w=a?b:this.zn-1-b,v.Eh=w,b=n+u*(m-s),w=a?b:this.zn-1-b,v.Lh=w,b=n+u*(g-s),w=a?b:this.zn-1-b,v.Bh=w}},t.prototype.Ci=function(t,i){var e=this.hh(t,i);return this.Fh(e,i)},t.prototype.Fh=function(t,i){var e=t;return this.vh()?e=function(t,i){return i<0&&(t=-t),t/100*i+i}(e,i):this._h()&&(e=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(e,i)),e},t.prototype.Vh=function(){return this.Kn},t.prototype.zh=function(){if(this.$n)return this.$n;for(var t=[],i=0;i<this.Kn.length;i++){var e=this.Kn[i];null===e.ai()&&e.oi(i+1),t.push(e)}return t=ai(t),this.$n=t,this.$n},t.prototype.Oh=function(t){-1===this.Kn.indexOf(t)&&(this.Kn.push(t),this.uh(),this.Ph())},t.prototype.Ih=function(t){var i=this.Kn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.Kn.splice(i,1),this.Qt()&&this.ah({dh:!0}),this.uh(),this.Ph()},t.prototype.q=function(){for(var t=null,i=0,e=this.Kn;i<e.length;i++){var n=e[i].q();null!==n&&(null===t||n.Wh<t.Wh)&&(t=n)}return null===t?null:t.Z},t.prototype.wh=function(){return this.xi.invertScale},t.prototype.Vn=function(){return this.Xn||(this.nh.Tn(),this.Xn=this.nh.Vn(),this.Hn.en()),this.Xn},t.prototype.Rh=function(){return this.Hn},t.prototype.jh=function(t){this.vh()||this._h()||null===this.Zn&&null===this.In&&(this.Qt()||(this.Zn=this.zn-t,this.In=rt(this.xh()).cn()))},t.prototype.Uh=function(t){if(!this.vh()&&!this._h()&&null!==this.Zn){this.ah({dh:!1}),(t=this.zn-t)<0&&(t=0);var i=(this.Zn+.2*(this.zn-1))/(t+.2*(this.zn-1)),e=rt(this.In).cn();i=Math.max(i,.1),e.Mn(i),this.Mh(e)}},t.prototype.qh=function(){this.vh()||this._h()||(this.Zn=null,this.In=null)},t.prototype.Hh=function(t){this.fh()||null===this.Jn&&null===this.In&&(this.Qt()||(this.Jn=t,this.In=rt(this.xh()).cn()))},t.prototype.Yh=function(t){if(!this.fh()&&null!==this.Jn){var i=rt(this.xh()).dn()/(this.ph()-1),e=t-this.Jn;this.wh()&&(e*=-1);var n=e*i,r=rt(this.In).cn();r.bn(n),this.Mh(r,!0),this.Xn=null}},t.prototype.Kh=function(){this.fh()||null!==this.Jn&&(this.Jn=null,this.In=null)},t.prototype.$h=function(){return this.Gn||this.uh(),this.Gn},t.prototype.ti=function(t,i){switch(this.xi.mode){case 2:return this.$h().Xi(Kt(t,i));case 3:return this.$h().Xi(ti(t,i));default:return this.Xh(t)}},t.prototype.Bn=function(t){switch(this.xi.mode){case 2:case 3:return this.$h().Xi(t);default:return this.Xh(t)}},t.prototype.Zh=function(t){return this.Xh(t,rt(this.Jh()).$h())},t.prototype.Gh=function(t,i){return t=Kt(t,i),li.Xi(t)},t.prototype.Qh=function(){return this.Kn},t.prototype.ts=function(t){this.Wn={jn:t,Rn:!1}},t.prototype.Wi=function(){this.Kn.forEach((function(t){return t.Wi()}))},t.prototype.uh=function(){this.Xn=null;var t=this.Jh(),i=100;null!==t&&(i=Math.round(1/t.ns())),this.Gn=ci,this.vh()?(this.Gn=li,i=100):this._h()?(this.Gn=new Xt(100,1),i=100):null!==t&&(this.Gn=t.$h()),this.nh=new hi(this,i,this.hh.bind(this),this.sh.bind(this)),this.nh.Tn()},t.prototype.Ph=function(){this.$n=null},t.prototype.Jh=function(){return this.Kn[0]||null},t.prototype.yh=function(){return this.wh()?this.xi.scaleMargins.bottom*this.wt()+this.qn:this.xi.scaleMargins.top*this.wt()+this.Un},t.prototype.kh=function(){return this.wh()?this.xi.scaleMargins.top*this.wt()+this.Un:this.xi.scaleMargins.bottom*this.wt()+this.qn},t.prototype.Nh=function(){this.Wn.Rn||(this.Wn.Rn=!0,this.hs())},t.prototype.lh=function(){this.On=null},t.prototype.sh=function(t,i){if(this.Nh(),this.Qt())return 0;t=this.Fn()&&t?ei(t):t;var e=rt(this.xh()),n=this.kh()+(this.ph()-1)*(t-e.vn())/e.dn();return this.Sh(n)},t.prototype.hh=function(t,i){if(this.Nh(),this.Qt())return 0;var e=this.Sh(t),n=rt(this.xh()),r=n.vn()+n.dn()*((e-this.kh())/(this.ph()-1));return this.Fn()?ni(r):r},t.prototype.bh=function(){this.Xn=null,this.nh.Tn()},t.prototype.hs=function(){var t=this.Wn.jn;if(null!==t){for(var i=null,e=0,n=0,r=0,s=this.Qh();r<s.length;r++){var o=s[r],h=o.q();if(null!==h){var a=o.ss(t.rs(),t.es()),u=a&&a.xh();if(null!==u){switch(this.xi.mode){case 1:u=ri(u);break;case 2:u=$t(u,h.Z);break;case 3:u=ii(u,h.Z)}if(i=null===i?u:i.wn(rt(u)),null!==a){var l=a.us();null!==l&&(e=Math.max(e,l.above),n=Math.max(e,l.below))}}}}if(e===this.Un&&n===this.qn||(this.Un=e,this.qn=n,this.Xn=null,this.lh()),null!==i){if(i.vn()===i._n()){var c=this.Jh(),f=5*(null===c||this.vh()||this._h()?1:c.ns());i=new Qt(i.vn()-f,i._n()+f)}this.Mh(i)}else null===this.Pn&&this.Mh(new Qt(-.5,.5));this.Wn.Rn=!0}},t.prototype.Ch=function(){return this.vh()?Kt:this._h()?ti:this.Fn()?ei:null},t.prototype.Xh=function(t,i){return void 0===this.ih.priceFormatter?(void 0===i&&(i=this.$h()),i.Xi(t)):this.ih.priceFormatter(t)},t}();function pi(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(ui||(ui={}));var vi=function(t){return t.getUTCFullYear()};function di(t,i,e){return i.replace(/yyyy/g,function(t){return At(vi(t),4)}(t)).replace(/yy/g,function(t){return At(vi(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,e)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,e)).replace(/MM/g,function(t){return At(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return At(function(t){return t.getUTCDate()}(t),2)}(t))}var yi=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.as=t,this.os=i}return t.prototype.Xi=function(t){return di(t,this.as,this.os)},t}(),mi=function(){function t(t){this.ls=t||"%h:%m:%s"}return t.prototype.Xi=function(t){return this.ls.replace("%h",At(t.getUTCHours(),2)).replace("%m",At(t.getUTCMinutes(),2)).replace("%s",At(t.getUTCSeconds(),2))},t}(),gi={fs:"yyyy-MM-dd",cs:"%h:%m:%s",vs:" ",_s:"default"},bi=function(){function t(t){void 0===t&&(t={});var i=tt(tt({},gi),t);this.ds=new yi(i.fs,i._s),this.ws=new mi(i.cs),this.Ms=i.vs}return t.prototype.Xi=function(t){return""+this.ds.Xi(t)+this.Ms+this.ws.Xi(t)},t}(),wi=function(){function t(t,i){void 0===i&&(i=50),this.bs=0,this.ms=1,this.gs=1,this.ps=new Map,this.ys=new Map,this.ks=t,this.xs=i}return t.prototype.Xi=function(t){var i=void 0===t.Ns?new Date(1e3*t.Ss).getTime():new Date(Date.UTC(t.Ns.year,t.Ns.month-1,t.Ns.day)).getTime(),e=this.ps.get(i);if(void 0!==e)return e.Ds;if(this.bs===this.xs){var n=this.ys.get(this.gs);this.ys.delete(this.gs),this.ps.delete(nt(n)),this.gs++,this.bs--}var r=this.ks(t);return this.ps.set(i,{Ds:r,Cs:this.ms}),this.ys.set(this.ms,i),this.bs++,this.ms++,r},t}(),Mi=function(){function t(t,i){et(t<=i,"right should be >= left"),this.Ts=t,this.As=i}return t.prototype.rs=function(){return this.Ts},t.prototype.es=function(){return this.As},t.prototype.Es=function(){return this.As-this.Ts+1},t.prototype.Ls=function(t){return this.Ts<=t&&t<=this.As},t.prototype.fn=function(t){return this.Ts===t.rs()&&this.As===t.es()},t}();function xi(t,i){return null===t||null===i?t===i:t.fn(i)}var _i,Si=function(){function t(){this.Bs=new Map,this.ps=null}return t.prototype.Fs=function(t){var i=this;this.ps=null,this.Bs.clear(),t.forEach((function(t,e){var n=i.Bs.get(t.Vs);void 0===n&&(n=[],i.Bs.set(t.Vs,n)),n.push({zs:e,V:t.V,Os:t.Vs})}))},t.prototype.Ps=function(t,i){var e=Math.ceil(i/t);return null!==this.ps&&this.ps.Is===e||(this.ps={Vn:this.Ws(e),Is:e}),this.ps.Vn},t.prototype.Ws=function(t){for(var i=[],e=0,n=Array.from(this.Bs.keys()).sort((function(t,i){return i-t}));e<n.length;e++){var r=n[e];if(this.Bs.get(r)){var s=i;i=[];for(var o=s.length,h=0,a=nt(this.Bs.get(r)),u=a.length,l=1/0,c=-1/0,f=0;f<u;f++){for(var p=a[f],v=p.zs;h<o;){var d=s[h],y=d.zs;if(!(y<v)){l=y;break}h++,i.push(d),c=y,l=1/0}l-v>=t&&v-c>=t&&(i.push(p),c=v)}for(;h<o;h++)i.push(s[h])}}return i},t}(),Pi=function(){function t(t){this.Rs=t}return t.prototype.js=function(){return null===this.Rs?null:new Mi(Math.floor(this.Rs.rs()),Math.ceil(this.Rs.es()))},t.prototype.Us=function(){return this.Rs},t.qs=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(_i||(_i={}));var Ci=function(){function t(t,i,e){this.Hs=0,this.Ys=null,this.Ks=[],this.Jn=null,this.Zn=null,this.$s=new Si,this.Xs=new Map,this.Zs=Pi.qs(),this.Js=!0,this.Gs=new Wt,this.Qs=new Wt,this.tr=new Wt,this.ir=null,this.nr=null,this.hr=[],this.xi=i,this.ih=e,this.sr=i.rightOffset,this.rr=i.barSpacing,this.hi=t,this.er()}return t.prototype.P=function(){return this.xi},t.prototype.ur=function(t){ot(this.ih,t),this.ar(),this.er()},t.prototype.eh=function(t,i){ot(this.xi,t),this.xi.fixLeftEdge&&this.or(),void 0!==t.barSpacing&&this.lr(t.barSpacing),void 0!==t.rightOffset&&this.cr(t.rightOffset),this.ar(),this.er(),this.tr.en()},t.prototype.si=function(t){var i;return(null===(i=this.Ks[t])||void 0===i?void 0:i.V)||null},t.prototype.vr=function(t,i){if(this.Ks.length<1)return null;if(t.Ss>this.Ks[this.Ks.length-1].V.Ss)return i?this.Ks.length-1:null;for(var e=0;e<this.Ks.length;++e){if(t.Ss===this.Ks[e].V.Ss)return e;if(t.Ss<this.Ks[e].V.Ss)return i?e:null}return null},t.prototype.Qt=function(){return 0===this.Hs||0===this.Ks.length},t.prototype._r=function(){return this.dr(),this.Zs.js()},t.prototype.wr=function(){return this.dr(),this.Zs.Us()},t.prototype.Mr=function(){var t=this._r();if(null===t)return null;var i={from:t.rs(),to:t.es()};return this.br(i)},t.prototype.br=function(t){var i=Math.round(t.from),e=Math.round(t.to),n=rt(this.mr()),r=rt(this.gr());return{from:rt(this.si(Math.max(n,i))),to:rt(this.si(Math.min(r,e)))}},t.prototype.pr=function(t){var i=this.hi.j();return{from:rt(i.vr(t.from,!0)),to:rt(i.vr(t.to,!0))}},t.prototype.yr=function(){return this.$s},t.prototype.dt=function(){return this.Hs},t.prototype.kr=function(t){if(isFinite(t)&&!(t<=0)&&this.Hs!==t){if(this.xi.lockVisibleTimeRangeOnResize&&this.Hs){var i=this.rr*t/this.Hs;this.xr(i)}if(this.xi.fixLeftEdge){var e=this._r();if(null!==e&&e.rs()<=0){var n=this.Hs-t;this.sr-=Math.round(n/this.rr)+1}}this.Hs=t,this.Js=!0,this.Nr(),this.Sr()}},t.prototype.J=function(t){if(this.Qt()||!at(t))return 0;var i=this.Dr()+this.sr-t;return this.Hs-(i+.5)*this.rr},t.prototype.Cr=function(t,i){for(var e=this.Dr(),n=void 0===i?0:i.from,r=void 0===i?t.length:i.to,s=n;s<r;s++){var o=t[s].V,h=e+this.sr-o,a=this.Hs-(h+.5)*this.rr;t[s].m=a}},t.prototype.Tr=function(t){return Math.ceil(this.Ar(t))},t.prototype.cr=function(t){this.Js=!0,this.sr=t,this.Sr(),this.hi.Er(),this.hi.Lr()},t.prototype.Br=function(){return this.rr},t.prototype.lr=function(t){this.xr(t),this.Sr(),this.hi.Er(),this.hi.Lr()},t.prototype.Fr=function(){return this.sr},t.prototype.Vn=function(){if(this.Qt())return null;if(null!==this.nr)return this.nr;for(var t=this.rr,i=5*(this.hi.P().layout.fontSize+4),e=Math.round(i/t),n=rt(this._r()),r=Math.max(n.rs(),n.rs()-e),s=Math.max(n.es(),n.es()-e),o=0,h=0,a=this.$s.Ps(t,i);h<a.length;h++){var u=a[h];if(r<=u.zs&&u.zs<=s){var l=this.si(u.zs);if(null!==l){if(o<this.hr.length){var c=this.hr[o];c.En=this.J(u.zs),c.Ln=this.Vr(l,u.Os),c.Os=u.Os}else this.hr.push({En:this.J(u.zs),Ln:this.Vr(l,u.Os),Os:u.Os});o++}}}return this.hr.length=o,this.nr=this.hr,this.hr},t.prototype.zr=function(){this.Js=!0,this.lr(this.xi.barSpacing),this.cr(this.xi.rightOffset)},t.prototype.Or=function(t){this.Js=!0,this.Ys=t,this.Sr(),this.or()},t.prototype.Pr=function(t,i){var e=this.Ar(t),n=this.Br(),r=n+i*(n/10);this.lr(r),this.xi.rightBarStaysOnScroll||this.cr(this.Fr()+(e-this.Ar(t)))},t.prototype.jh=function(t){this.Jn&&this.Kh(),null===this.Zn&&null===this.ir&&(this.Qt()||(this.Zn=t,this.Ir()))},t.prototype.Uh=function(t){if(null!==this.ir){var i=Ut(this.Hs-t,0,this.Hs),e=Ut(this.Hs-rt(this.Zn),0,this.Hs);0!==i&&0!==e&&this.lr(this.ir.Br*i/e)}},t.prototype.qh=function(){null!==this.Zn&&(this.Zn=null,this.Wr())},t.prototype.Hh=function(t){null===this.Jn&&null===this.ir&&(this.Qt()||(this.Jn=t,this.Ir()))},t.prototype.Yh=function(t){if(null!==this.Jn){var i=(this.Jn-t)/this.Br();this.sr=rt(this.ir).Fr+i,this.Js=!0,this.Sr()}},t.prototype.Kh=function(){null!==this.Jn&&(this.Jn=null,this.Wr())},t.prototype.Rr=function(){this.jr(this.xi.rightOffset)},t.prototype.jr=function(t,i){var e=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var n=this.sr,r=(new Date).getTime(),s=function(){var o=((new Date).getTime()-r)/i,h=o>=1,a=h?t:n+(t-n)*o;e.cr(a),h||setTimeout(s,20)};s()},t.prototype.B=function(t){this.Js=!0,this.Ks=t,this.$s.Fs(t),this.Sr()},t.prototype.Ur=function(){return this.Gs},t.prototype.qr=function(){return this.Qs},t.prototype.Hr=function(){return this.tr},t.prototype.Dr=function(){return this.Ys||0},t.prototype.Yr=function(t){var i=t.Es();this.xr(this.Hs/i),this.sr=t.es()-this.Dr(),this.Sr(),this.Js=!0,this.hi.Er(),this.hi.Lr()},t.prototype.Kr=function(){var t=this.mr(),i=this.gr();null!==t&&null!==i&&this.Yr(new Mi(t,i+this.xi.rightOffset))},t.prototype.$r=function(t){var i=new Mi(t.from,t.to);this.Yr(i)},t.prototype.ri=function(t){return void 0!==this.ih.timeFormatter?this.ih.timeFormatter(t.Ns||t.Ss):this.Xr.Xi(new Date(1e3*t.Ss))},t.prototype.mr=function(){return 0===this.Ks.length?null:0},t.prototype.gr=function(){return 0===this.Ks.length?null:this.Ks.length-1},t.prototype.Zr=function(t){return(this.Hs+1-t)/this.rr},t.prototype.Ar=function(t){var i=this.Zr(t),e=this.Dr()+this.sr-i;return Math.round(1e6*e)/1e6},t.prototype.xr=function(t){var i=this.rr;this.rr=t,this.Nr(),i!==this.rr&&(this.Js=!0,this.Jr())},t.prototype.dr=function(){if(this.Js)if(this.Js=!1,this.Qt())this.Gr(Pi.qs());else{var t=this.Dr(),i=this.Hs/this.rr,e=this.sr+t,n=new Mi(e-i+1,e);this.Gr(new Pi(n))}},t.prototype.Nr=function(){if(this.rr<.5&&(this.rr=.5,this.Js=!0),0!==this.Hs){var t=.5*this.Hs;this.rr>t&&(this.rr=t,this.Js=!0)}},t.prototype.Sr=function(){var t=this.Qr();this.sr>t&&(this.sr=t,this.Js=!0);var i=this.te();null!==i&&this.sr<i&&(this.sr=i,this.Js=!0)},t.prototype.te=function(){var t=this.mr(),i=this.Ys;return null===t||null===i?null:t-i-1+(this.xi.fixLeftEdge?this.Hs/this.rr:Math.min(2,this.Ks.length))},t.prototype.Qr=function(){return this.Hs/this.rr-Math.min(2,this.Ks.length)},t.prototype.Ir=function(){this.ir={Br:this.Br(),Fr:this.Fr()}},t.prototype.Wr=function(){this.ir=null},t.prototype.Vr=function(t,i){var e=this,n=this.Xs.get(i);return void 0===n&&(n=new wi((function(t){return e.ie(t,i)})),this.Xs.set(i,n)),n.Xi(t)},t.prototype.ie=function(t,i){var e,n,r=this.xi.timeVisible;return n=i<20&&r?this.xi.secondsVisible?4:3:i<40&&r?3:i<50||i<60?2:i<70?1:0,void 0!==this.xi.tickMarkFormatter?this.xi.tickMarkFormatter(null!==(e=t.Ns)&&void 0!==e?e:t.Ss,n,this.ih.locale):function(t,i,e){var n={};switch(i){case 0:n.year="numeric";break;case 1:n.month="short";break;case 2:n.day="numeric";break;case 3:n.hour12=!1,n.hour="2-digit",n.minute="2-digit";break;case 4:n.hour12=!1,n.hour="2-digit",n.minute="2-digit",n.second="2-digit"}var r=void 0===t.Ns?new Date(1e3*t.Ss):new Date(Date.UTC(t.Ns.year,t.Ns.month-1,t.Ns.day));return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()).toLocaleString(e,n)}(t,n,this.ih.locale)},t.prototype.Gr=function(t){var i=this.Zs;this.Zs=t,xi(i.js(),this.Zs.js())||this.Gs.en(),xi(i.Us(),this.Zs.Us())||this.Qs.en(),this.Jr()},t.prototype.Jr=function(){this.nr=null},t.prototype.ar=function(){this.Jr(),this.Xs.clear()},t.prototype.er=function(){var t=this.ih.dateFormat;this.xi.timeVisible?this.Xr=new bi({fs:t,cs:this.xi.secondsVisible?"%h:%m:%s":"%h:%m",vs:"   ",_s:this.ih.locale}):this.Xr=new yi(t,this.ih.locale)},t.prototype.or=function(){if(this.xi.fixLeftEdge){var t=this.mr();if(null!==t){var i=rt(this._r()).rs()-t;if(i<0){var e=this.sr-i-1;this.cr(e)}}}},t}();function Ti(t){return!ht(t)&&!ut(t)}function Li(t){return ht(t)}var Oi="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ei(t,i,e){return void 0!==e?e+=" ":e="",void 0===i&&(i=Oi),""+e+t+"px "+i}var ki=function(){function t(t){this.ne={Dt:1,St:4,Vt:NaN,kt:"",he:"",et:"",Tt:0,At:0,Et:0,Ct:0,Ft:0},this.A=t}return t.prototype.P=function(){var t=this.ne,i=this.se(),e=this.ee();return t.Vt===i&&t.he===e||(t.Vt=i,t.he=e,t.kt=Ei(i,e),t.Ct=Math.floor(i/3.5),t.Tt=t.Ct,t.At=Math.max(Math.ceil(i/2-t.St/2),0),t.Et=Math.ceil(i/2+t.St/2),t.Ft=Math.round(i/10)),t.et=this.ue(),this.ne},t.prototype.ue=function(){return this.A.P().layout.textColor},t.prototype.se=function(){return this.A.P().layout.fontSize},t.prototype.ee=function(){return this.A.P().layout.fontFamily},t}();function Di(t){return"left"===t||"right"===t}var zi=function(){function t(){this.G=null}return t.prototype.v=function(t){this.G=t},t.prototype.h=function(t,i,e,n){var r=this;if(null!==this.G){var s=Math.floor(i);t.lineWidth=s;var o=Math.ceil(this.G.st*i),h=Math.ceil(this.G.ht*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var e=rt(r.G);if(e.ae){t.strokeStyle=e.oe,H(t,e.le),t.beginPath();for(var n=0,a=e.fe;n<a.length;n++){var u=a[n],l=Math.round(u.En*i);t.moveTo(l,-s),t.lineTo(l,o+s)}t.stroke()}if(e.ce){t.strokeStyle=e.ve,H(t,e._e),t.beginPath();for(var c=0,f=e.de;c<f.length;c++){var p=f[c],v=Math.round(p.En*i);t.moveTo(-s,v),t.lineTo(h+s,v)}t.stroke()}}))}},t}(),Gi=function(){function t(t){this.ot=new zi,this.T=!0,this._i=t}return t.prototype.B=function(){this.T=!0},t.prototype.I=function(t,i){if(this.T){var e=this._i.ct().P().grid,n={st:t,ht:i,ce:e.horzLines.visible,ae:e.vertLines.visible,ve:e.horzLines.color,oe:e.vertLines.color,_e:e.horzLines.style,le:e.vertLines.style,de:this._i.Di().Vn(),fe:this._i.ct().j().Vn()||[]};this.ot.v(n),this.T=!1}return this.ot},t}(),ji=function(){function t(){this.we=new WeakMap,this.T=!0}return t.prototype.ci=function(t){var i=this.we.get(t);return void 0===i&&(i=[new Gi(t)],this.we.set(t,i)),this.T&&(i.forEach((function(t){return t.B()})),this.T=!1),i},t.prototype.Me=function(){this.T=!0},t}(),Vi=function(){function t(t){this.be=new Map,this.me=!1,this.ge=!1,this.Rs=null,this.pe=t}return t.prototype.ye=function(t,i){var e=function(t,i){return void 0===t?i:{ke:Math.max(t.ke,i.ke),dh:t.dh||i.dh}}(this.be.get(t),i);this.be.set(t,e)},t.prototype.xe=function(){return this.pe},t.prototype.Ne=function(t){var i=this.be.get(t);return void 0===i?{ke:this.pe}:{ke:Math.max(this.pe,i.ke),dh:i.dh}},t.prototype.Se=function(){this.ge=!0,this.Rs=null},t.prototype.De=function(){return this.ge},t.prototype.$r=function(t){this.Rs=t,this.ge=!1},t.prototype.Ce=function(){return this.Rs},t.prototype.wn=function(t){var i=this;this.me=this.me||t.me,t.ge&&this.Se(),t.Rs&&this.$r(t.Rs),this.pe=Math.max(this.pe,t.pe),t.be.forEach((function(t,e){i.ye(e,t)}))},t}(),Ni=function(){function t(t){this.Te=t}return t.prototype.Xi=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Ae(t):t<999995?i+this.Ae(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Ae(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Ae(t/1e9)+"B")},t.prototype.Ae=function(t){var i=Math.pow(10,this.Te);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Te).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Ri(t,i,e,n){if(0!==i.length){var r=i[n.from].m,s=i[n.from].g;t.moveTo(r,s);for(var o=n.from+1;o<n.to;++o){var h=i[o];if(1===e){var a=i[o-1].g,u=h.m;t.lineTo(u,a)}t.lineTo(h.m,h.g)}}}var Ii=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.l=null,i}return $(i,t),i.prototype.v=function(t){this.l=t},i.prototype.s=function(t){if(null!==this.l&&0!==this.l.M.length&&null!==this.l._){t.lineCap="butt",t.strokeStyle=this.l.N,t.lineWidth=this.l.rt,H(t,this.l.ut),t.lineWidth=1,t.beginPath(),t.moveTo(this.l.M[this.l._.from].m,this.l.Ee),t.lineTo(this.l.M[this.l._.from].m,this.l.M[this.l._.from].g),Ri(t,this.l.M,this.l.Le,this.l._),this.l._.to>this.l._.from&&(t.lineTo(this.l.M[this.l._.to-1].m,this.l.Ee),t.lineTo(this.l.M[this.l._.from].m,this.l.Ee)),t.closePath();var i=t.createLinearGradient(0,0,0,this.l.Ee);i.addColorStop(0,this.l.Be),i.addColorStop(1,this.l.Fe),t.fillStyle=i,t.fill()}},i}(gt),Fi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.l=null,i}return $(i,t),i.prototype.v=function(t){this.l=t},i.prototype.s=function(t){null!==this.l&&0!==this.l.M.length&&null!==this.l._&&(t.lineCap="square",t.lineWidth=this.l.rt,H(t,this.l.ut),t.strokeStyle=this.l.N,t.lineJoin="miter",t.beginPath(),Ri(t,this.l.M,this.l.Le,this.l._),t.stroke())},i}(gt);function Bi(t,i,e,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=r-n;0<s;){var o=s>>1,h=n+o;e(t[h],i)?(n=h+1,s-=o+1):s=o}return n}function Ai(t,i,e,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=r-n;0<s;){var o=s>>1,h=n+o;e(i,t[h])?s=o:(n=h+1,s-=o+1)}return n}function Xi(t,i){return t.V<i}function Ji(t,i){return t<i.V}function Wi(t,i,e){var n=i.rs(),r=i.es(),s=Bi(t,n,Xi),o=Ai(t,r,Ji);if(!e)return{from:s,to:o};var h=s,a=o;return s>0&&s<t.length&&t[s].V>=n&&(h=s-1),o>0&&o<t.length&&t[o-1].V<=r&&(a=o+1),{from:h,to:a}}var Qi=function(){function t(t,i,e){this.Ve=!0,this.ze=!0,this.Oe=[],this.Pe=null,this.Ie=t,this.We=i,this.Re=e}return t.prototype.B=function(t){this.Ve=!0,"data"===t&&(this.ze=!0)},t.prototype.je=function(){this.ze&&(this.Ue(),this.ze=!1),this.Ve&&(this.qe(),this.Ve=!1)},t.prototype.He=function(){this.Pe=null},t.prototype.qe=function(){var t=this.Ie.X(),i=this.We.j();if(this.He(),!i.Qt()&&!t.Qt()){var e=i._r();if(null!==e&&0!==this.Ie.qi().Ye()){var n=this.Ie.q();null!==n&&(this.Pe=Wi(this.Oe,e,this.Re),this.Ke(t,i,n.Z))}}},t}(),Ui=function(t){function i(i,e){return t.call(this,i,e,!0)||this}return $(i,t),i.prototype.Ke=function(t,i,e){i.Cr(this.Oe,pt(this.Pe)),t.Dh(this.Oe,e,pt(this.Pe))},i.prototype.$e=function(t,i){return{V:t,O:i,m:NaN,g:NaN}},i.prototype.Ue=function(){var t=this,i=this.Ie.K();this.Oe=this.Ie.qi().Xe().map((function(e){var n=e.Z[3];return t.Ze(e.zs,n,i)}))},i}(Qi),qi=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.ot=new mt,n.Je=new Ii,n.Ge=new Fi,n.ot.i([n.Je,n.Ge]),n}return $(i,t),i.prototype.I=function(t,i){this.je();var e=this.Ie.P(),n={Le:e.lineType,M:this.Oe,N:e.lineColor,ut:e.lineStyle,rt:e.lineWidth,Be:e.topColor,Fe:e.bottomColor,Ee:t,_:this.Pe};return this.Je.v(n),this.Ge.v(n),this.ot},i.prototype.Ze=function(t,i){return this.$e(t,i)},i}(Ui),Yi=function(){function t(){this.G=null,this.Qe=0,this.tu=0}return t.prototype.v=function(t){this.G=t},t.prototype.h=function(t,i,e,n){if(null!==this.G&&0!==this.G.qi.length&&null!==this.G._){this.Qe=Math.max(1,Math.floor(function(t,i){return Math.floor(.3*t*i)}(this.G.Br,i))),this.Qe>=2&&Math.floor(i)%2!=this.Qe%2&&this.Qe--,this.tu=this.G.iu?Math.min(this.Qe,Math.floor(i)):this.Qe;for(var r=null,s=this.G._.from;s<this.G._.to;++s){var o=this.G.qi[s];r!==o.et&&(t.fillStyle=o.et,r=o.et);var h=Math.floor(.5*this.tu),a=Math.round(o.m*i),u=a-h,l=this.tu,c=u+l-1,f=Math.round(o.Eh*i)-h,p=Math.round(o.Lh*i)+h,v=Math.max(p-f,this.tu);t.fillRect(u,f,l,v);var d=Math.ceil(1.5*this.Qe);if(this.tu<=this.Qe){if(this.G.nu){var y=a-d,m=Math.max(f,Math.round(o.Ah*i)-h),g=m+l-1;g>f+v-1&&(m=(g=f+v-1)-l+1),t.fillRect(y,m,u-y,g-m+1)}var b=a+d,w=Math.max(f,Math.round(o.Bh*i)-h),M=w+l-1;M>f+v-1&&(w=(M=f+v-1)-l+1),t.fillRect(c+1,w,b-c,M-w+1)}}}},t}(),Hi=function(t){function i(i,e){return t.call(this,i,e,!1)||this}return $(i,t),i.prototype.Ke=function(t,i,e){i.Cr(this.Oe,pt(this.Pe)),t.Th(this.Oe,e,pt(this.Pe))},i.prototype.hu=function(t,i,e){return{V:t,open:i.Z[0],high:i.Z[1],low:i.Z[2],close:i.Z[3],m:NaN,Ah:NaN,Eh:NaN,Lh:NaN,Bh:NaN}},i.prototype.Ue=function(){var t=this,i=this.Ie.K();this.Oe=this.Ie.qi().Xe().map((function(e){return t.Ze(e.zs,e,i)}))},i}(Qi),Zi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new Yi,i}return $(i,t),i.prototype.I=function(t,i){this.je();var e=this.Ie.P(),n={qi:this.Oe,Br:this.We.j().Br(),nu:e.openVisible,iu:e.thinBars,_:this.Pe};return this.ot.v(n),this.ot},i.prototype.Ze=function(t,i,e){return tt(tt({},this.hu(t,i,e)),{et:e.Y(t).H})},i}(Hi),Ki=function(){function t(){this.G=null,this.Qe=0}return t.prototype.v=function(t){this.G=t},t.prototype.h=function(t,i,e,n){if(null!==this.G&&0!==this.G.qi.length&&null!==this.G._){this.Qe=function(t,i){var e=Math.floor(.8*t*i),n=Math.floor(t*i),r=Math.min(e,n-1);return Math.max(1,r)}(this.G.Br,i),this.Qe>=2&&Math.floor(i)%2!=this.Qe%2&&this.Qe--;var r=this.G.qi;this.G.su&&this.ru(t,r,this.G._,i),this.G.eu&&this.uu(t,r,this.G._,this.G.Br,i);var s=this.au(i);(!this.G.eu||this.Qe>2*s)&&this.ou(t,r,this.G._,i)}},t.prototype.ru=function(t,i,e,n){if(null!==this.G){var r="",s=Math.min(Math.floor(n),Math.floor(this.G.Br*n));s=Math.min(s,this.Qe);for(var o=Math.floor(.5*s),h=e.from;h<e.to;h++){var a=i[h];a.lu!==r&&(t.fillStyle=a.lu,r=a.lu);var u=Math.round(Math.min(a.Ah,a.Bh)*n),l=Math.round(Math.max(a.Ah,a.Bh)*n),c=Math.round(a.Eh*n),f=Math.round(a.Lh*n),p=Math.round(n*a.m);t.fillRect(p-o,c,s,u-c),t.fillRect(p-o,l+1,s,f-l)}}},t.prototype.au=function(t){var i=Math.floor(1*t);this.Qe<=2*i&&(i=Math.floor(.5*(this.Qe-1)));var e=Math.max(1,i);return this.Qe<=2*e?Math.floor(1*t):e},t.prototype.uu=function(t,i,e,n,r){for(var s="",o=this.au(r),h=e.from;h<e.to;h++){var a=i[h];a.Pt!==s&&(t.fillStyle=a.Pt,s=a.Pt);var u=Math.round(a.m*r)-Math.floor(.5*this.Qe),l=u+this.Qe-1,c=Math.round(Math.min(a.Ah,a.Bh)*r),f=Math.round(Math.max(a.Ah,a.Bh)*r);n>2*o?Lt(t,u,c,l-u+1,f-c+1,o):t.fillRect(u,c,l-u+1,f-c+1)}},t.prototype.ou=function(t,i,e,n){if(null!==this.G)for(var r="",s=this.au(n),o=e.from;o<e.to;o++){var h=i[o],a=Math.round(Math.min(h.Ah,h.Bh)*n),u=Math.round(Math.max(h.Ah,h.Bh)*n),l=Math.round(h.m*n)-Math.floor(.5*this.Qe),c=l+this.Qe-1;if(this.G.eu&&(l+=s,a+=s,c-=s,u-=s),!(a>u)){if(h.et!==r){var f=h.et;t.fillStyle=f,r=f}t.fillRect(l,a,c-l+1,u-a+1)}}},t}(),$i=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new Ki,i}return $(i,t),i.prototype.I=function(t,i){this.je();var e=this.Ie.P(),n={qi:this.Oe,Br:this.We.j().Br(),su:e.wickVisible,eu:e.borderVisible,_:this.Pe};return this.ot.v(n),this.ot},i.prototype.Ze=function(t,i,e){var n=e.Y(t);return tt(tt({},this.hu(t,i,e)),{et:n.H,lu:n.fu,Pt:n.cu})},i}(Hi),te=function(){function t(){this.G=null,this.vu=[]}return t.prototype.v=function(t){this.G=t,this.vu=[]},t.prototype.h=function(t,i,e,n){if(null!==this.G&&0!==this.G.M.length&&null!==this.G._){this.vu.length||this._u(i);for(var r=Math.round(this.G.du*i),s=Math.max(1,Math.floor(i)),o=this.G._.from;o<this.G._.to;o++){var h=this.G.M[o],a=this.vu[o-this.G._.from],u=Math.round(h.g*i);t.fillStyle=h.et,t.fillRect(a.rs,u,a.es-a.rs+1,r-u+s)}}},t.prototype._u=function(t){if(null!==this.G&&0!==this.G.M.length&&null!==this.G._){var i=Math.ceil(this.G.Br*t)<=3?0:Math.max(1,Math.floor(t)),e=Math.round(this.G.Br*t)-i;this.vu=new Array(this.G._.to-this.G._.from);for(var n=this.G._.from;n<this.G._.to;n++){var r,s=this.G.M[n],o=Math.round(s.m*t),h=void 0,a=void 0;e%2?(h=o-(r=(e-1)/2),a=o+r):(h=o-(r=e/2),a=o+r-1),this.vu[n-this.G._.from]={rs:h,es:a,wu:o,Mu:s.m*t,V:s.V}}for(n=this.G._.from+1;n<this.G._.to;n++){var u=this.vu[n-this.G._.from],l=this.vu[n-this.G._.from-1];u.V===l.V+1&&u.rs-l.es!==i+1&&(l.wu>l.Mu?l.es=u.rs-i-1:u.rs=l.es+i+1)}var c=Math.ceil(this.G.Br*t);for(n=this.G._.from;n<this.G._.to;n++){(u=this.vu[n-this.G._.from]).es<u.rs&&(u.es=u.rs);var f=u.es-u.rs+1;c=Math.min(f,c)}if(i>0&&c<4)for(n=this.G._.from;n<this.G._.to;n++)(f=(u=this.vu[n-this.G._.from]).es-u.rs+1)>c&&(u.wu>u.Mu?u.es-=1:u.rs+=1)}else this.vu=[]},t}();function ie(t){return{M:[],Br:t,du:NaN,_:null}}function ee(t,i,e){return{V:t,O:i,m:NaN,g:NaN,et:e}}var ne=function(t){function i(i,e){var n=t.call(this,i,e,!1)||this;return n.S=new mt,n.bu=ie(0),n.ot=new te,n}return $(i,t),i.prototype.I=function(t,i){return this.je(),this.S},i.prototype.Ue=function(){var t=this.We.j().Br();this.bu=ie(t);for(var i=0,e=0,n=this.Ie.P().color,r=0,s=this.Ie.qi().Xe();r<s.length;r++){var o=s[r],h=o.Z[3],a=void 0!==o.et?o.et:n,u=ee(o.zs,h,a);++i<this.bu.M.length?this.bu.M[i]=u:this.bu.M.push(u),this.Oe[e++]={V:o.zs,m:0}}this.ot.v(this.bu),this.S.i([this.ot])},i.prototype.He=function(){t.prototype.He.call(this),this.bu._=null},i.prototype.Ke=function(t,i,e){if(null!==this.Pe){var n=i.Br(),r=rt(i._r()),s=t.$(this.Ie.P().base,e);i.Cr(this.bu.M),t.Dh(this.bu.M,e),this.bu.du=s,this.bu._=Wi(this.bu.M,r,!1),this.bu.Br=n,this.ot.v(this.bu)}},i}(Qi),re=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.Ge=new Fi,n}return $(i,t),i.prototype.I=function(t,i){this.je();var e=this.Ie.P(),n={M:this.Oe,N:e.color,ut:e.lineStyle,Le:e.lineType,rt:e.lineWidth,_:this.Pe};return this.Ge.v(n),this.Ge},i.prototype.Ze=function(t,i){return this.$e(t,i)},i}(Ui),se=/[2-9]/g,oe=function(){function t(t){void 0===t&&(t=50),this.ps=new Map,this.mu=0,this.gu=Array.from(new Array(t))}return t.prototype.pu=function(){this.ps.clear(),this.gu.fill(void 0)},t.prototype.Bt=function(t,i,e){var n=e||se,r=String(i).replace(n,"0"),s=this.ps.get(r);if(void 0===s){if(0===(s=t.measureText(r).width)&&0!==i.length)return 0;var o=this.gu[this.mu];void 0!==o&&this.ps.delete(o),this.gu[this.mu]=r,this.mu=(this.mu+1)%this.gu.length,this.ps.set(r,s)}return s},t}(),he=function(){function t(t){this.yu=null,this.ne=null,this.ku="right",this.Hs=0,this.xu=t}return t.prototype.Nu=function(t,i,e,n){this.yu=t,this.ne=i,this.Hs=e,this.ku=n},t.prototype.h=function(t,i){null!==this.ne&&null!==this.yu&&this.yu.h(t,this.ne,this.xu,this.Hs,this.ku,i)},t}(),ae=function(){function t(t,i,e){this.Su=t,this.xu=new oe(50),this.Du=i,this.A=e,this.se=-1,this.ot=new he(this.xu)}return t.prototype.I=function(t,i){var e=this.A.Cu(this.Du);if(null===e)return null;var n=e.Tu(this.Du)?e.Di():this.Du.X();if(null===n)return null;var r=e.Au(n);if("overlay"===r)return null;var s=this.A.Eu();return s.Vt!==this.se&&(this.se=s.Vt,this.xu.pu()),this.ot.Nu(this.Su.Xt(),s,i,r),this.ot},t}(),ue=function(){function t(){this.G=null}return t.prototype.v=function(t){this.G=t},t.prototype.h=function(t,i,e,n){if(null!==this.G&&!1!==this.G.tt){var r=Math.round(this.G.g*i);if(!(r<0||r>Math.ceil(this.G.wt*i))){var s=Math.ceil(this.G.dt*i);t.lineCap="butt",t.strokeStyle=this.G.et,t.lineWidth=Math.floor(this.G.rt*i),H(t,this.G.ut),Z(t,r,0,s)}}},t}(),le=function(){function t(t){this.Lu={dt:0,wt:0,g:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,tt:!1},this.Bu=new ue,this.T=!0,this.Ie=t,this.We=t.ct(),this.Bu.v(this.Lu)}return t.prototype.B=function(){this.T=!0},t.prototype.I=function(t,i){return this.T&&(this.Fu(t,i),this.T=!1),this.Bu},t}(),ce=function(t){function i(i){return t.call(this,i)||this}return $(i,t),i.prototype.Fu=function(t,i){this.Lu.tt=!1;var e=this.Ie.X(),n=e.oh().oh;if(2===n||3===n){var r=this.Ie.P();if(r.baseLineVisible){var s=this.Ie.q();null!==s&&(this.Lu.tt=!0,this.Lu.g=e.$(s.Z,s.Z),this.Lu.dt=i,this.Lu.wt=t,this.Lu.et=r.baseLineColor,this.Lu.rt=r.baseLineWidth,this.Lu.ut=r.baseLineStyle)}}},i}(le);function fe(t,i){return Zt(Math.min(Math.max(t,12),30)*i)}function pe(t,i){switch(t){case"arrowDown":case"arrowUp":return fe(i,1);case"circle":return fe(i,.8);case"square":return fe(i,.7)}}function ve(t){return Ht(fe(t,1))}function de(t){return Math.max(fe(t,.1),3)}function ye(t,i,e,n,r){var s=pe("square",e),o=(s-1)/2,h=t-o,a=i-o;return n>=h&&n<=h+s&&r>=a&&r<=a+s}function me(t,i,e,n,r){var s=(pe("arrowUp",r)-1)/2,o=(Zt(r/2)-1)/2;i.beginPath(),t?(i.moveTo(e-s,n),i.lineTo(e,n-s),i.lineTo(e+s,n),i.lineTo(e+o,n),i.lineTo(e+o,n+s),i.lineTo(e-o,n+s),i.lineTo(e-o,n)):(i.moveTo(e-s,n),i.lineTo(e,n+s),i.lineTo(e+s,n),i.lineTo(e+o,n),i.lineTo(e+o,n-s),i.lineTo(e-o,n-s),i.lineTo(e-o,n)),i.fill()}function ge(t,i,e,n,r,s){return ye(i,e,n,r,s)}var be=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.G=null,i.xu=new oe,i.se=-1,i.ee="",i.Vu="",i}return $(i,t),i.prototype.v=function(t){this.G=t},i.prototype.Nu=function(t,i){this.se===t&&this.ee===i||(this.se=t,this.ee=i,this.Vu=Ei(t,i),this.xu.pu())},i.prototype.zu=function(t,i){if(null===this.G||null===this.G._)return null;for(var e=this.G._.from;e<this.G._.to;e++){var n=this.G.M[e];if(Me(n,t,i))return{Ou:n.Pu,Iu:n.Iu}}return null},i.prototype.s=function(t,i,e){if(null!==this.G&&null!==this.G._){t.textBaseline="middle",t.font=this.Vu;for(var n=this.G._.from;n<this.G._.to;n++){var r=this.G.M[n];void 0!==r.Lt&&(r.Lt.dt=this.xu.Bt(t,r.Lt.Wu),r.Lt.wt=this.se),we(r,t)}}},i}(gt);function we(t,i){i.fillStyle=t.et,void 0!==t.Lt&&function(t,i,e,n){t.fillText(i,e,n)}(i,t.Lt.Wu,t.m-t.Lt.dt/2,t.Lt.g),function(t,i){if(0!==t.Ye){switch(t.Ru){case"arrowDown":return void me(!1,i,t.m,t.g,t.Ye);case"arrowUp":return void me(!0,i,t.m,t.g,t.Ye);case"circle":return void function(t,i,e,n){var r=(pe("circle",n)-1)/2;t.beginPath(),t.arc(i,e,r,0,2*Math.PI,!1),t.fill()}(i,t.m,t.g,t.Ye);case"square":return void function(t,i,e,n){var r=pe("square",n),s=(r-1)/2,o=i-s,h=e-s;t.fillRect(o,h,r,r)}(i,t.m,t.g,t.Ye)}t.Ru}}(t,i)}function Me(t,i,e){return!(void 0===t.Lt||!function(t,i,e,n,r,s){var o=n/2;return r>=t&&r<=t+e&&s>=i-o&&s<=i+o}(t.m,t.Lt.g,t.Lt.dt,t.Lt.wt,i,e))||function(t,i,e){if(0===t.Ye)return!1;switch(t.Ru){case"arrowDown":case"arrowUp":return ge(0,t.m,t.g,t.Ye,i,e);case"circle":return function(t,i,e,n,r){var s=2+pe("circle",e)/2,o=t-n,h=i-r;return Math.sqrt(o*o+h*h)<=s}(t.m,t.g,t.Ye,i,e);case"square":return ye(t.m,t.g,t.Ye,i,e)}t.Ru}(t,i,e)}function xe(t,i,e,n,r,s,o,h,a){var u=ht(e)?e:e.close,l=ht(e)?e:e.high,c=ht(e)?e:e.low,f=ht(i.size)?Math.max(i.size,0):1,p=ve(h.Br())*f,v=p/2;switch(t.Ye=p,i.position){case"inBar":return t.g=o.$(u,a),void(void 0!==t.Lt&&(t.Lt.g=t.g+v+s+.6*r));case"aboveBar":return t.g=o.$(l,a)-v-n.ju,void 0!==t.Lt&&(t.Lt.g=t.g-v-.6*r,n.ju+=1.2*r),void(n.ju+=p+s);case"belowBar":return t.g=o.$(c,a)+v+n.Uu,void 0!==t.Lt&&(t.Lt.g=t.g+v+s+.6*r,n.Uu+=1.2*r),void(n.Uu+=p+s)}i.position}var _e=function(){function t(t,i){this.T=!0,this.qu=!0,this.Hu=!0,this.Yu=null,this.ot=new be,this.Ku=t,this.hi=i,this.G={M:[],_:null}}return t.prototype.B=function(t){this.T=!0,this.Hu=!0,"data"===t&&(this.qu=!0)},t.prototype.I=function(t,i,e){this.T&&this.je();var n=this.hi.P().layout;return this.ot.Nu(n.fontSize,n.fontFamily),this.ot.v(this.G),this.ot},t.prototype.$u=function(){if(this.Hu){if(this.Ku.Xu().length>0){var t=this.hi.j().Br(),i=de(t),e=1.5*ve(t)+2*i;this.Yu={above:e,below:e}}else this.Yu=null;this.Hu=!1}return this.Yu},t.prototype.je=function(){var t=this.Ku.X(),i=this.hi.j(),e=this.Ku.Xu();this.qu&&(this.G.M=e.map((function(t){return{V:t.time,m:0,g:0,Ye:0,Ru:t.shape,et:t.color,Pu:t.Pu,Iu:t.id,Lt:void 0}})),this.qu=!1);var n=this.hi.P().layout;this.G._=null;var r=i._r();if(null!==r){var s=this.Ku.q();if(null!==s&&0!==this.G.M.length){var o=NaN,h=de(i.Br()),a={ju:h,Uu:h};this.G._=Wi(this.G.M,r,!0);for(var u=this.G._.from;u<this.G._.to;u++){var l=e[u];l.time!==o&&(a.ju=h,a.Uu=h,o=l.time);var c=this.G.M[u];c.m=i.J(l.time),void 0!==l.text&&l.text.length>0&&(c.Lt={Wu:l.text,g:0,dt:0,wt:0});var f=this.Ku.Zu(l.time);null!==f&&xe(c,l,f,a,n.fontSize,h,t,i,s.Z)}this.T=!1}}},t}(),Se=function(t){function i(i){return t.call(this,i)||this}return $(i,t),i.prototype.Fu=function(t,i){var e=this.Lu;e.tt=!1;var n=this.Ie.P();if(n.priceLineVisible){var r=this.Ie.Ju(0===n.priceLineSource);r.Gu||(e.tt=!0,e.g=r.zt,e.et=this.Ie.Qu(r.et),e.dt=i,e.wt=t,e.rt=n.priceLineWidth,e.ut=n.priceLineStyle)}},i}(le),Pe=function(t){function i(i){var e=t.call(this)||this;return e.lt=i,e}return $(i,t),i.prototype.Zt=function(t,i,e){t.tt=!1,i.tt=!1;var n=this.lt.P(),r=n.lastValueVisible,s=""!==this.lt.ta(),o=0===n.seriesLastValueMode,h=this.lt.Ju(!1);if(!h.Gu){r&&(t.Lt=this.ia(h,r,o),t.tt=0!==t.Lt.length),(s||o)&&(i.Lt=this.na(h,r,s,o),i.tt=i.Lt.length>0);var a=this.lt.Qu(h.et),u=Tt(a);e.gt=u.gt,e.et=u.pt,e.zt=h.zt,i.Pt=this.lt.ct().P().layout.backgroundColor,t.Pt=a}},i.prototype.na=function(t,i,e,n){var r="",s=this.lt.ta();return e&&0!==s.length&&(r+=s+" "),i&&n&&(r+=this.lt.X().vh()?t.ha:t.sa),r.trim()},i.prototype.ia=function(t,i,e){return i?e?this.lt.X().vh()?t.sa:t.ha:t.Lt:""},i}(zt),Ce=function(){function t(t,i){this.Pn=t,this.ra=i||null}return t.prototype.xh=function(){return this.Pn},t.prototype.us=function(){return this.ra},t.prototype.mn=function(){return null===this.Pn?null:{priceRange:this.Pn.mn(),margins:this.ra||void 0}},t.gn=function(i){return null===i?null:new t(Qt.gn(i.priceRange),i.margins)},t}(),Te=function(t){function i(i,e){var n=t.call(this,i)||this;return n.ea=e,n}return $(i,t),i.prototype.Fu=function(t,i){var e=this.Lu;e.tt=!1;var n=this.ea.ua();if(null!==n){var r=this.ea.P();e.tt=!0,e.g=n,e.et=r.color,e.dt=i,e.wt=t,e.rt=r.lineWidth,e.ut=r.lineStyle}},i}(le),Le=function(t){function i(i,e){var n=t.call(this)||this;return n.Ku=i,n.ea=e,n}return $(i,t),i.prototype.Zt=function(t,i,e){t.tt=!1,i.tt=!1;var n=this.ea.P();if(n.axisLabelVisible){var r=this.ea.ua();if(null!==r){t.Lt=this.Ku.X().Zh(n.price),t.tt=!0;var s=Tt(n.color);e.gt=s.gt,e.et=s.pt,e.zt=r}}},i}(zt),Oe=function(){function t(t,i){this.Ku=t,this.xi=i,this.aa=new Te(t,this),this.Su=new Le(t,this)}return t.prototype.eh=function(t){ot(this.xi,t),this.B(),this.Ku.ct().Lr()},t.prototype.P=function(){return this.xi},t.prototype.oa=function(){return this.aa},t.prototype.la=function(){return this.Su},t.prototype.B=function(){this.aa.B(),this.Su.B()},t.prototype.ua=function(){var t=this.Ku,i=t.X();if(t.ct().j().Qt()||i.Qt())return null;var e=t.q();return null===e?null:i.$(this.xi.price,e.Z)},t}(),Ee=function(t){function i(i){var e=t.call(this)||this;return e.hi=i,e}return $(i,t),i.prototype.ct=function(){return this.hi},i}(Rt),ke={H:"",cu:"",fu:""},De=function(){function t(t){this.Ku=t}return t.prototype.Y=function(t,i){var e=this.Ku.fa(),n=this.Ku.P();switch(e){case"Line":return this.ca(n);case"Area":return this.va(n);case"Bar":return this._a(n,t,i);case"Candlestick":return this.da(n,t,i);case"Histogram":return this.wa(n,t,i)}throw new Error("Unknown chart style")},t.prototype._a=function(t,i,e){var n=tt({},ke),r=t.upColor,s=t.downColor,o=r,h=s,a=rt(this.Ma(i,e)),u=st(a.Z[0])<=st(a.Z[3]);return n.H=u?r:s,n.cu=u?o:h,n},t.prototype.da=function(t,i,e){var n=tt({},ke),r=t.upColor,s=t.downColor,o=t.borderUpColor,h=t.borderDownColor,a=t.wickUpColor,u=t.wickDownColor,l=rt(this.Ma(i,e)),c=st(l.Z[0])<=st(l.Z[3]);return n.H=c?r:s,n.cu=c?o:h,n.fu=c?a:u,n},t.prototype.va=function(t){return tt(tt({},ke),{H:t.lineColor})},t.prototype.ca=function(t){return tt(tt({},ke),{H:t.color})},t.prototype.wa=function(t,i,e){var n=tt({},ke),r=rt(this.Ma(i,e));return n.H=void 0!==r.et?r.et:t.color,n},t.prototype.Ma=function(t,i){return void 0!==i?i.Z:this.Ku.qi().ba(t)},t}(),ze=function(){function t(){this.ma=[],this.ga=new Map,this.pa=new Map}return t.prototype.ya=function(){this.ma=[],this.ga.clear(),this.pa.clear()},t.prototype.ka=function(){return this.Ye()>0?this.ma[this.ma.length-1]:null},t.prototype.xa=function(){return this.Ye()>0?this.Na(0):null},t.prototype.Ui=function(){return this.Ye()>0?this.Na(this.ma.length-1):null},t.prototype.Ye=function(){return this.ma.length},t.prototype.Qt=function(){return 0===this.Ye()},t.prototype.Ls=function(t){return null!==this.Sa(t,0)},t.prototype.ba=function(t){return this.Da(t)},t.prototype.Da=function(t,i){void 0===i&&(i=0);var e=this.Sa(t,i);return null===e?null:tt(tt({},this.Ca(e)),{zs:this.Na(e)})},t.prototype.Xe=function(){return this.ma},t.prototype.Ta=function(t,i,e){if(this.Qt())return null;for(var n=null,r=0,s=e;r<s.length;r++){var o=s[r];n=Ge(n,this.Aa(t,i,o))}return n},t.prototype.wn=function(t){0!==t.length&&(this.Qt()||t[t.length-1].zs<this.ma[0].zs?this.Ea(t):t[0].zs>this.ma[this.ma.length-1].zs?this.La(t):1!==t.length||t[0].zs!==this.ma[this.ma.length-1].zs?this.Ba(t):this.Fa(t[0]))},t.prototype.Na=function(t){return this.ma[t].zs},t.prototype.Ca=function(t){return this.ma[t]},t.prototype.Sa=function(t,i){var e=this.Va(t);if(null===e&&0!==i)switch(i){case-1:return this.za(t);case 1:return this.Oa(t);default:throw new TypeError("Unknown search mode")}return e},t.prototype.za=function(t){var i=this.Pa(t);return i>0&&(i-=1),i!==this.ma.length&&this.Na(i)<t?i:null},t.prototype.Oa=function(t){var i=this.Ia(t);return i!==this.ma.length&&t<this.Na(i)?i:null},t.prototype.Va=function(t){var i=this.Pa(t);return i===this.ma.length||t<this.ma[i].zs?null:i},t.prototype.Pa=function(t){return Bi(this.ma,t,(function(t,i){return t.zs<i}))},t.prototype.Ia=function(t){return Ai(this.ma,t,(function(t,i){return i.zs>t}))},t.prototype.Wa=function(t,i,e){for(var n=null,r=t;r<i;r++){var s=this.ma[r].Z[e];Number.isNaN(s)||(null===n?n={Ra:s,ja:s}:(s<n.Ra&&(n.Ra=s),s>n.ja&&(n.ja=s)))}return n},t.prototype.Ua=function(t){var i=Math.floor(t.zs/30);this.ga.forEach((function(t){return t.delete(i)}))},t.prototype.Ea=function(t){et(0!==t.length,"plotRows should not be empty"),this.pa.clear(),this.ga.clear(),this.ma=t.concat(this.ma)},t.prototype.La=function(t){et(0!==t.length,"plotRows should not be empty"),this.pa.clear(),this.ga.clear(),this.ma=this.ma.concat(t)},t.prototype.Fa=function(t){et(!this.Qt(),"plot list should not be empty"),et(this.ma[this.ma.length-1].zs===t.zs,"last row index should match new row index"),this.Ua(t),this.pa.delete(t.zs),this.ma[this.ma.length-1]=t},t.prototype.Ba=function(t){et(0!==t.length,"plot rows should not be empty"),this.pa.clear(),this.ga.clear(),this.ma=function(t,i){for(var e=function(t,i){for(var e=t.length,n=i.length,r=e+n,s=0,o=0;s<e&&o<n;)t[s].zs<i[o].zs?s++:t[s].zs>i[o].zs?o++:(s++,o++,r--);return r}(t,i),n=new Array(e),r=0,s=0,o=t.length,h=i.length,a=0;r<o&&s<h;)t[r].zs<i[s].zs?(n[a]=t[r],r++):t[r].zs>i[s].zs?(n[a]=i[s],s++):(n[a]=i[s],r++,s++),a++;for(;r<o;)n[a]=t[r],r++,a++;for(;s<h;)n[a]=i[s],s++,a++;return n}(this.ma,t)},t.prototype.Aa=function(t,i,e){if(this.Qt())return null;var n=null,r=rt(this.xa()),s=rt(this.Ui()),o=Math.max(t,r),h=Math.min(i,s),a=30*Math.ceil(o/30),u=Math.max(a,30*Math.floor(h/30)),l=this.Pa(o),c=this.Ia(Math.min(h,a,i));n=Ge(n,this.Wa(l,c,e));var f=this.ga.get(e);void 0===f&&(f=new Map,this.ga.set(e,f));for(var p=Math.max(a+1,o);p<u;p+=30){var v=Math.floor(p/30),d=f.get(v);if(void 0===d){var y=this.Pa(30*v),m=this.Ia(30*(v+1)-1);d=this.Wa(y,m,e),f.set(v,d)}n=Ge(n,d)}return l=this.Pa(u),c=this.Ia(h),Ge(n,this.Wa(l,c,e))},t}();function Ge(t,i){return null===t?i:null===i?t:{Ra:Math.min(t.Ra,i.Ra),ja:Math.max(t.ja,i.ja)}}var je=function(t){function i(i,e,n){var r=t.call(this,i)||this;r.G=new ze,r.aa=new Se(r),r.qa=[],r.Ha=new ce(r),r.Ya=null,r.Ka=[],r.$a=[],r.xi=e,r.Xa=n;var s=new Pe(r);return r.bi=[s],r.Za=new ae(s,r,i),r.Ja(),r.Ga(),r}return $(i,t),i.prototype.an=function(){},i.prototype.Qu=function(t){return this.xi.priceLineColor||t},i.prototype.Ju=function(t,i){var e={Gu:!0},n=this.X();if(this.ct().j().Qt()||n.Qt()||this.G.Qt())return e;var r,s,o=this.ct().j()._r(),h=this.q();if(null===o||null===h)return e;if(t){var a=this.G.ka();if(null===a)return e;r=a,s=a.zs}else{var u=this.G.Da(o.es(),-1);if(null===u)return e;if(null===(r=this.G.ba(u.zs)))return e;s=u.zs}var l=r.Z[3],c=this.K().Y(s,{Z:r}),f=n.$(l,h.Z);return{Gu:!1,O:i?l:void 0,Lt:n.ti(l,h.Z),ha:n.Zh(l),sa:n.Gh(l,h.Z),et:c.H,zt:f,zs:s}},i.prototype.K=function(){return null!==this.Ya||(this.Ya=new De(this)),this.Ya},i.prototype.P=function(){return this.xi},i.prototype.eh=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.xi.priceScaleId&&this.ct().Qa(this,i),ot(this.xi,t),null!==this.ei&&void 0!==t.scaleMargins&&this.ei.eh({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.Ja(),this.ct().io(this)},i.prototype.no=function(){this.G.ya(),this.Ga()},i.prototype.ho=function(t,i){i&&this.G.ya(),this.G.wn(t),this.so(),this.Ai.B("data"),this.Ni.B("data");var e=this.ct().Cu(this);this.ct().ro(e),this.ct().io(this),this.ct().eo(),this.ct().Lr()},i.prototype.uo=function(t){this.Ka=t.map((function(t){return tt({},t)})),this.so();var i=this.ct().Cu(this);this.Ni.B("data"),this.ct().ro(i),this.ct().io(this),this.ct().eo(),this.ct().Lr()},i.prototype.Xu=function(){return this.$a},i.prototype.ao=function(t){var i=new Oe(this,t);return this.qa.push(i),this.ct().io(this),i},i.prototype.oo=function(t){var i=this.qa.indexOf(t);-1!==i&&this.qa.splice(i,1),this.ct().io(this)},i.prototype.fa=function(){return this.Xa},i.prototype.q=function(){var t=this.lo();return null===t?null:{Z:t.Z[3],Wh:t.V}},i.prototype.lo=function(){var t=this.ct().j()._r();if(null===t)return null;var i=t.rs();return this.G.Da(i,1)},i.prototype.qi=function(){return this.G},i.prototype.Zu=function(t){var i=this.G.ba(t);return null===i?null:"Bar"===this.Xa||"Candlestick"===this.Xa?{open:i.Z[0],high:i.Z[1],low:i.Z[2],close:i.Z[3]}:i.Z[3]},i.prototype.ci=function(){var t=[];this.fo()||t.push(this.Ha);for(var i=0,e=this.qa;i<e.length;i++){var n=e[i];t.push(n.oa())}return t.push(this.Ai),t.push(this.aa),t.push(this.Za),t.push(this.Ni),t},i.prototype.fi=function(t,i){for(var e=i===this.ei||this.fo()?it(this.bi):[],n=0,r=this.qa;n<r.length;n++){var s=r[n];e.push(s.la())}return e},i.prototype.ss=function(t,i){var e=this;if(void 0!==this.xi.autoscaleInfoProvider){var n=this.xi.autoscaleInfoProvider((function(){var n=e.co(t,i);return null===n?null:n.mn()}));return Ce.gn(n)}return this.co(t,i)},i.prototype.ns=function(){return this.xi.priceFormat.minMove},i.prototype.$h=function(){return this.Gn},i.prototype.Wi=function(){this.Ai.B(),this.Ni.B();for(var t=0,i=this.bi;t<i.length;t++)i[t].B();for(var e=0,n=this.qa;e<n.length;e++)n[e].B();this.aa.B(),this.Ha.B()},i.prototype.X=function(){return rt(this.ei)},i.prototype.U=function(t){if("Line"!==this.Xa&&"Area"!==this.Xa||!this.xi.crosshairMarkerVisible)return null;var i=this.G.ba(t);return null===i?null:{O:i.Z[3],k:this.vo()}},i.prototype.ta=function(){return this.xi.title},i.prototype.fo=function(){return!Di(this.X().rh())},i.prototype.co=function(t,i){if(!at(t)||!at(i)||this.G.Qt())return null;var e="Line"===this.Xa||"Area"===this.Xa||"Histogram"===this.Xa?[3]:[2,1],n=this.G.Ta(t,i,e),r=null!==n?new Qt(n.Ra,n.ja):null;if("Histogram"===this.fa()){var s=this.xi.base,o=new Qt(s,s);r=null!==r?r.wn(o):o}return new Ce(r,this.Ni.$u())},i.prototype.vo=function(){switch(this.Xa){case"Line":case"Area":return this.xi.crosshairMarkerRadius}return 0},i.prototype.Ja=function(){switch(this.xi.priceFormat.type){case"custom":this.Gn={Xi:this.xi.priceFormat.formatter};break;case"volume":this.Gn=new Ni(this.xi.priceFormat.precision);break;case"percent":this.Gn=new Jt(this.xi.priceFormat.precision);break;default:var t=Math.pow(10,this.xi.priceFormat.precision);this.Gn=new Xt(t,this.xi.priceFormat.minMove*t,!1,void 0)}null!==this.ei&&this.ei.uh()},i.prototype.so=function(){var t=this,i=this.ct().j();if(i.Qt()||0===this.G.Ye())this.$a=[];else{var e=rt(this.G.xa());this.$a=this.Ka.map((function(n,r){var s=rt(i.vr(n.time,!0)),o=s<e?1:-1;return{time:rt(t.G.Da(s,o)).zs,position:n.position,shape:n.shape,color:n.color,id:n.id,Pu:r,text:n.text,size:n.size}}))}},i.prototype.Ga=function(){switch(this.Ni=new _e(this,this.ct()),this.Xa){case"Bar":this.Ai=new Zi(this,this.ct());break;case"Candlestick":this.Ai=new $i(this,this.ct());break;case"Line":this.Ai=new re(this,this.ct());break;case"Area":this.Ai=new qi(this,this.ct());break;case"Histogram":this.Ai=new ne(this,this.ct());break;default:throw Error("Unknown chart style assigned: "+this.Xa)}},i}(Ee),Ve=function(){function t(t){this.xi=t}return t.prototype._o=function(t,i,e){var n=t;if(0===this.xi.mode)return n;var r=e.Di(),s=r.q();if(null===s)return n;var o=r.$(t,s),h=e.Vh().filter((function(t){return t instanceof je})).reduce((function(t,n){if(e.Tu(n))return t;var r=n.X(),s=n.qi();if(r.Qt()||!s.Ls(i))return t;var o=s.ba(i);if(null===o)return t;var h=st(n.q());return t.concat([r.$(o.Z[3],h.Z)])}),[]);if(0===h.length)return n;h.sort((function(t,i){return Math.abs(t-o)-Math.abs(i-o)}));var a=h[0];return r.Ci(a,s)},t}(),Ne=function(){function t(t,i){this.Kn=[],this.do=new Map,this.zn=0,this.Hs=0,this.wo=1e3,this.$n=null,this.Mo=new Wt,this.bo=t,this.hi=i;var e=i.P();this.mo=this.po("left",e.leftPriceScale),this.yo=this.po("right",e.rightPriceScale),this.mo.mh().tn(this.ko.bind(this,this.mo),this),this.yo.mh().tn(this.ko.bind(this,this.mo),this),this.xo(e)}return t.prototype.xo=function(t){if(t.leftPriceScale&&this.mo.eh(t.leftPriceScale),t.rightPriceScale&&this.yo.eh(t.rightPriceScale),t.localization&&(this.mo.uh(),this.yo.uh()),t.overlayPriceScales)for(var i=0,e=Array.from(this.do.values());i<e.length;i++){var n=rt(e[i][0].X());n.eh(t.overlayPriceScales),t.localization&&n.uh()}},t.prototype.No=function(t){switch(t){case"left":return this.mo;case"right":return this.yo}return this.do.has(t)?nt(this.do.get(t))[0].X():null},t.prototype.an=function(){this.ct().So().rn(this),this.mo.mh().rn(this),this.yo.mh().rn(this),this.Kn.forEach((function(t){t.an&&t.an()})),this.Mo.en()},t.prototype.Do=function(){return this.wo},t.prototype.Co=function(t){this.wo=t},t.prototype.ct=function(){return this.hi},t.prototype.dt=function(){return this.Hs},t.prototype.wt=function(){return this.zn},t.prototype.kr=function(t){this.Hs=t,this.To()},t.prototype.gh=function(t){var i=this;this.zn=t,this.mo.gh(t),this.yo.gh(t),this.Kn.forEach((function(e){if(i.Tu(e)){var n=e.X();null!==n&&n.gh(t)}})),this.To()},t.prototype.Vh=function(){return this.Kn},t.prototype.Tu=function(t){var i=t.X();return null===i||this.mo!==i&&this.yo!==i},t.prototype.Oh=function(t,i,e){var n=void 0!==e?e:this.Eo().Ao-1;this.Lo(t,i,n)},t.prototype.Ih=function(t){var i=this.Kn.indexOf(t);et(-1!==i,"removeDataSource: invalid data source"),this.Kn.splice(i,1);var e=rt(t.X()).rh();if(this.do.has(e)){var n=nt(this.do.get(e)),r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&this.do.delete(e))}var s=t.X();s&&s.Vh().indexOf(t)>=0&&s.Ih(t),null!==s&&(s.Ph(),this.Bo(s)),this.$n=null},t.prototype.Au=function(t){return t===this.mo?"left":t===this.yo?"right":"overlay"},t.prototype.Fo=function(){return this.mo},t.prototype.Vo=function(){return this.yo},t.prototype.zo=function(t,i){t.jh(i)},t.prototype.Oo=function(t,i){t.Uh(i),this.To()},t.prototype.Po=function(t){t.qh()},t.prototype.Io=function(t,i){t.Hh(i)},t.prototype.Wo=function(t,i){t.Yh(i),this.To()},t.prototype.Ro=function(t){t.Kh()},t.prototype.To=function(){this.Kn.forEach((function(t){t.Wi()}))},t.prototype.Di=function(){var t=null;return this.hi.P().rightPriceScale.visible&&0!==this.yo.Vh().length?t=this.yo:this.hi.P().leftPriceScale.visible&&0!==this.mo.Vh().length?t=this.mo:0!==this.Kn.length&&(t=this.Kn[0].X()),null===t&&(t=this.yo),t},t.prototype.Bo=function(t){null!==t&&t.fh()&&this.jo(t)},t.prototype.Uo=function(t){var i=this.bo._r();t.ah({dh:!0}),null!==i&&t.ts(i),this.To()},t.prototype.qo=function(){this.jo(this.mo),this.jo(this.yo)},t.prototype.Ho=function(){var t=this;this.Bo(this.mo),this.Bo(this.yo),this.Kn.forEach((function(i){t.Tu(i)&&t.Bo(i.X())})),this.To(),this.hi.Lr()},t.prototype.zh=function(){return null===this.$n&&(this.$n=ai(this.Kn)),this.$n},t.prototype.Yo=function(){return this.Mo},t.prototype.jo=function(t){var i=t.Qh();if(i&&i.length>0&&!this.bo.Qt()){var e=this.bo._r();null!==e&&t.ts(e)}t.Wi()},t.prototype.Eo=function(){var t=this.zh();if(0===t.length)return{Ao:0,Ko:0};for(var i=0,e=0,n=0;n<t.length;n++){var r=t[n].ai();null!==r&&(r<i&&(i=r),r>e&&(e=r))}return{Ao:i,Ko:e}},t.prototype.Lo=function(t,i,e){var n=this.No(i);if(null===n&&(n=this.po(i,this.hi.P().overlayPriceScales)),this.Kn.push(t),!Di(i)){var r=this.do.get(i)||[];r.push(t),this.do.set(i,r)}n.Oh(t),t.li(n),t.oi(e),this.Bo(n),this.$n=null},t.prototype.ko=function(t,i,e){i.oh!==e.oh&&this.jo(t)},t.prototype.po=function(t,i){var e=tt({visible:!0,autoScale:!0},ct(i)),n=new fi(t,e,this.hi.P().layout,this.hi.P().localization);return n.gh(this.wt()),n},t}(),Re=function(t){function i(i){var e=t.call(this)||this;return e.$o=new Map,e.G=i,e}return $(i,t),i.prototype.s=function(t){},i.prototype.o=function(t){if(this.G.tt){t.save();for(var i=0,e=0,n=this.G.Xo;e<n.length;e++)if(0!==(a=n[e]).Lt.length){t.font=a.kt;var r=this.Zo(t,a.Lt);r>this.G.dt?a.Pr=this.G.dt/r:a.Pr=1,i+=a.Jo*a.Pr}var s=0;switch(this.G.Go){case"top":s=0;break;case"center":s=Math.max((this.G.wt-i)/2,0);break;case"bottom":s=Math.max(this.G.wt-i,0)}t.fillStyle=this.G.et;for(var o=0,h=this.G.Xo;o<h.length;o++){var a=h[o];t.save();var u=0;switch(this.G.Qo){case"left":t.textAlign="left",u=a.Jo/2;break;case"center":t.textAlign="center",u=this.G.dt/2;break;case"right":t.textAlign="right",u=this.G.dt-1-a.Jo/2}t.translate(u,s),t.textBaseline="top",t.font=a.kt,t.scale(a.Pr,a.Pr),t.fillText(a.Lt,0,a.tl),t.restore(),s+=a.Jo*a.Pr}t.restore()}},i.prototype.Zo=function(t,i){var e=this.il(t.font),n=e.get(i);return void 0===n&&(n=t.measureText(i).width,e.set(i,n)),n},i.prototype.il=function(t){var i=this.$o.get(t);return void 0===i&&(i=new Map,this.$o.set(t,i)),i},i}(gt),Ie=function(){function t(t){this.T=!0,this.at={tt:!1,et:"",wt:0,dt:0,Xo:[],Go:"center",Qo:"center"},this.ot=new Re(this.at),this.lt=t}return t.prototype.B=function(){this.T=!0},t.prototype.I=function(t,i){return this.T&&(this.W(t,i),this.T=!1),this.ot},t.prototype.W=function(t,i){var e=this.lt.P(),n=this.at;n.tt=e.visible,n.tt&&(n.et=e.color,n.dt=i,n.wt=t,n.Qo=e.horzAlign,n.Go=e.vertAlign,n.Xo=[{Lt:e.text,kt:Ei(e.fontSize,e.fontFamily,e.fontStyle),Jo:1.2*e.fontSize,tl:0,Pr:0}])},t}(),Fe=function(t){function i(i,e){var n=t.call(this)||this;return n.xi=e,n.Ai=new Ie(n),n}return $(i,t),i.prototype.ci=function(){return[this.Ai]},i.prototype.P=function(){return this.xi},i.prototype.Wi=function(){this.Ai.B()},i}(Rt),Be=function(){function t(t,i){this.nl=[],this.hl=[],this.Hs=0,this.sl=null,this.rl=null,this.el=new Wt,this.ul=new Wt,this.al=t,this.xi=i,this.ol=new ki(this),this.bo=new Ci(this,i.timeScale,this.xi.localization),this.ll=new ji,this.L=new It(this,i.crosshair),this.fl=new Ve(i.crosshair),this.cl=new Fe(this,i.watermark),this.vl(),this.nl[0].Co(2e3)}return t.prototype._l=function(){this.dl(new Vi(3))},t.prototype.Lr=function(){this.dl(new Vi(2))},t.prototype.io=function(t){var i=this.wl(t);this.dl(i)},t.prototype.Ml=function(){return this.rl},t.prototype.bl=function(t){var i=this.rl;this.rl=t,null!==i&&this.io(i.ml),null!==t&&this.io(t.ml)},t.prototype.P=function(){return this.xi},t.prototype.eh=function(t){ot(this.xi,t),this.nl.forEach((function(i){return i.xo(t)})),void 0!==t.timeScale&&this.bo.eh(t.timeScale),void 0!==t.localization&&this.bo.ur(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.el.en(),this._l()},t.prototype.gl=function(t,i){var e=this.pl(t);null!==e&&(e.X.eh(i),this.el.en())},t.prototype.pl=function(t){for(var i=0,e=this.nl;i<e.length;i++){var n=e[i],r=n.No(t);if(null!==r)return{ft:n,X:r}}return null},t.prototype.j=function(){return this.bo},t.prototype.yl=function(){return this.nl},t.prototype.kl=function(){return this.ll},t.prototype.xl=function(){return this.cl},t.prototype.Nl=function(){return this.L},t.prototype.Sl=function(){return this.ul},t.prototype.Dl=function(t,i){t.gh(i),this.Er()},t.prototype.kr=function(t){this.Hs=t,this.bo.kr(this.Hs),this.nl.forEach((function(i){return i.kr(t)})),this.Er()},t.prototype.vl=function(t){var i=new Ne(this.bo,this);void 0!==t?this.nl.splice(t,0,i):this.nl.push(i);var e=void 0===t?this.nl.length-1:t,n=new Vi(3);return n.ye(e,{ke:0,dh:!0}),this.Me(n),i},t.prototype.zo=function(t,i,e){t.zo(i,e)},t.prototype.Oo=function(t,i,e){t.Oo(i,e),this.eo(),this.dl(this.Cl(t,2))},t.prototype.Po=function(t,i){t.Po(i),this.dl(this.Cl(t,2))},t.prototype.Io=function(t,i,e){i.fh()||t.Io(i,e)},t.prototype.Wo=function(t,i,e){i.fh()||(t.Wo(i,e),this.eo(),this.dl(this.Cl(t,2)))},t.prototype.Ro=function(t,i){i.fh()||(t.Ro(i),this.dl(this.Cl(t,2)))},t.prototype.Uo=function(t,i){t.Uo(i),this.dl(this.Cl(t,2))},t.prototype.Tl=function(t){this.bo.jh(t)},t.prototype.Al=function(t,i){var e=this.j();if(!e.Qt()&&0!==i){var n=e.dt();t=Math.max(1,Math.min(t,n)),e.Pr(t,i),this.Er()}},t.prototype.El=function(t){this.Ll(0),this.Bl(t),this.Fl()},t.prototype.Vl=function(t){this.bo.Uh(t),this.Er()},t.prototype.zl=function(){this.bo.qh(),this.Lr()},t.prototype.Ll=function(t){this.sl=t,this.bo.Hh(t)},t.prototype.Bl=function(t){var i=!1;return null!==this.sl&&Math.abs(t-this.sl)>20&&(this.sl=null,i=!0),this.bo.Yh(t),this.Er(),i},t.prototype.Fl=function(){this.bo.Kh(),this.Lr(),this.sl=null},t.prototype.Ol=function(){this.bo.zr(),this.Er()},t.prototype.Me=function(t){this.al&&this.al(t),this.ll.Me(),this.Lr()},t.prototype.F=function(){return this.hl},t.prototype.Pl=function(t,i,e){this.L.Ei(t,i);var n=NaN,r=this.bo.Tr(t),s=this.bo._r();null!==s&&(r=Math.min(Math.max(s.rs(),r),s.es()));var o=e.Di(),h=o.q();null!==h&&(n=o.Ci(i,h)),n=this.fl._o(n,r,e),this.L.Vi(r,n,e),this.Il(),this.ul.en(this.L.R(),{x:t,y:i})},t.prototype.Wl=function(){this.Nl().Oi(),this.Il(),this.ul.en(null,null)},t.prototype.eo=function(){var t=this.L.ft();if(null!==t){var i=this.L.Bi(),e=this.L.Fi();this.Pl(i,e,t)}},t.prototype.Rl=function(t,i){void 0!==i&&this.bo.B(i);var e=this.bo.Dr(),n=this.bo._r();if(null!==n){var r=n.Ls(e);if(t>e&&!r){var s=t-e;this.bo.cr(this.bo.Fr()-s)}}this.bo.Or(t)},t.prototype.ro=function(t){null!==t&&t.Ho()},t.prototype.Cu=function(t){var i=this.nl.find((function(i){return i.zh().includes(t)}));return void 0===i?null:i},t.prototype.Er=function(){this.cl.Wi(),this.nl.forEach((function(t){return t.Ho()})),this.eo()},t.prototype.an=function(){this.nl.forEach((function(t){return t.an()})),this.nl.length=0,this.xi.localization.priceFormatter=void 0,this.xi.localization.timeFormatter=void 0},t.prototype.jl=function(){return this.ol},t.prototype.Eu=function(){return this.ol.P()},t.prototype.So=function(){return this.el},t.prototype.Ul=function(t,i){var e=this.nl[0],n=this.ql(i,t,e);return this.hl.push(n),1===this.hl.length?this._l():this.Lr(),n},t.prototype.Hl=function(t){var i=this.Cu(t),e=this.hl.indexOf(t);et(-1!==e,"Series not found"),this.hl.splice(e,1),rt(i).Ih(t),t.an&&t.an()},t.prototype.Qa=function(t,i){var e=rt(this.Cu(t));e.Ih(t);var n=this.pl(i);if(null===n){var r=t.ai();e.Oh(t,i,r)}else r=n.ft===e?t.ai():void 0,n.ft.Oh(t,i,r)},t.prototype.Kr=function(){var t=new Vi(2);t.Se(),this.dl(t)},t.prototype.Yl=function(t){var i=new Vi(2);i.$r(t),this.dl(i)},t.prototype.Kl=function(){return this.xi.rightPriceScale.visible?"right":"left"},t.prototype.Cl=function(t,i){var e=new Vi(i);if(null!==t){var n=this.nl.indexOf(t);e.ye(n,{ke:i})}return e},t.prototype.wl=function(t,i){return void 0===i&&(i=2),this.Cl(this.Cu(t),i)},t.prototype.dl=function(t){this.al&&this.al(t),this.ll.Me()},t.prototype.Il=function(){this.dl(new Vi(1))},t.prototype.ql=function(t,i,e){var n=new je(this,t,i),r=void 0!==t.priceScaleId?t.priceScaleId:this.Kl();return e.Oh(n,r),Di(r)||n.eh(t),n},t}(),Ae=function(){function t(t,i){this.ht=t,this.st=i}return t.prototype.fn=function(t){return this.ht===t.ht&&this.st===t.st},t}();function Xe(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function Je(t){var i=rt(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function We(t){var i=t.createElement("canvas");return function(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.MozUserSelect="none",t.style.webkitTapHighlightColor="transparent"}(i),i}function Qe(t,i){var e=We(t),n=Xe(e);return e.style.width=i.ht+"px",e.style.height=i.st+"px",e.width=i.ht*n,e.height=i.st*n,e}function Ue(t,i){var e=We(rt(t.ownerDocument));t.appendChild(e);var n=Q(e);return n.resizeCanvas({width:i.ht,height:i.st}),n}var qe="undefined"!=typeof window,Ye=function(){if(!qe)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!qe&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}(),He=function(){if(!qe)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),Ze=function(){function t(t,i,e){this.$l=0,this.Xl=null,this.Zl=null,this.Jl=!1,this.Gl=null,this.Ql=!1,this.tf=!1,this.if=null,this.nf=null,this.hf=null,this.sf=null,this.rf=0,this.ef=!1,this.uf=!1,this.af=!1,this.lf=t,this.ff=i,this.xi=e,this.cf()}return t.prototype.an=function(){null!==this.if&&(this.if(),this.if=null),null!==this.nf&&(this.nf(),this.nf=null),null!==this.hf&&(this.hf(),this.hf=null),this.vf(),this._f()},t.prototype.df=function(t){var i=this;this.nf&&this.nf();var e=this.wf.bind(this);this.nf=function(){i.lf.removeEventListener("mousemove",e)},this.lf.addEventListener("mousemove",e),tn(t)&&this.wf(t);var n=this.Mf(t);this.bf(n,this.ff.mf)},t.prototype._f=function(){null!==this.Xl&&clearTimeout(this.Xl),this.$l=0,this.Xl=null},t.prototype.wf=function(t){if(!this.af||tn(t)){var i=this.Mf(t);this.bf(i,this.ff.gf)}},t.prototype.pf=function(t){if((!("button"in t)||0===t.button)&&null===this.sf){var i=tn(t);if(!this.uf||!i){this.ef=!0;var e=this.Mf(t),n=st(this.Gl),r=Math.abs(n.m-e.yf),s=Math.abs(n.g-e.kf),o=r+s>5;if(o||!i){if(o&&!this.Ql&&i){var h=.5*r,a=s>=h&&!this.xi.xf,u=h>s&&!this.xi.Nf;a||u||(this.uf=!0)}o&&(this.Ql=!0,this.tf=!0,i&&this.vf()),this.uf||(this.bf(e,this.ff.Sf),i&&en(t))}}}},t.prototype.Df=function(t){if(!("button"in t)||0===t.button){var i=this.Mf(t);this.vf(),this.Gl=null,this.af=!1,this.hf&&(this.hf(),this.hf=null),tn(t)&&this.Cf(t),this.bf(i,this.ff.Tf),++this.$l,this.Xl&&this.$l>1?(this.bf(i,this.ff.Af),this._f()):this.tf||this.bf(i,this.ff.Ef),tn(t)&&(en(t),this.Cf(t),0===t.touches.length&&(this.Jl=!1))}},t.prototype.vf=function(){null!==this.Zl&&(clearTimeout(this.Zl),this.Zl=null)},t.prototype.Lf=function(t){if(!("button"in t)||0===t.button){var i=this.Mf(t);this.tf=!1,this.Ql=!1,this.uf=!1,tn(t)&&this.df(t),this.Gl={m:i.yf,g:i.kf},this.hf&&(this.hf(),this.hf=null);var e=this.pf.bind(this),n=this.Df.bind(this),r=this.lf.ownerDocument.documentElement;this.hf=function(){r.removeEventListener("touchmove",e),r.removeEventListener("touchend",n),r.removeEventListener("mousemove",e),r.removeEventListener("mouseup",n)},r.addEventListener("touchmove",e,{passive:!1}),r.addEventListener("touchend",n,{passive:!1}),this.vf(),tn(t)&&1===t.touches.length?this.Zl=setTimeout(this.Bf.bind(this,t),240):(r.addEventListener("mousemove",e),r.addEventListener("mouseup",n)),this.af=!0,this.bf(i,this.ff.Ff),this.Xl||(this.$l=0,this.Xl=setTimeout(this._f.bind(this),500))}},t.prototype.cf=function(){var t=this;this.lf.addEventListener("mouseenter",this.df.bind(this)),this.lf.addEventListener("touchcancel",this.vf.bind(this));var i=this.lf.ownerDocument,e=function(i){t.ff.Vf&&(i.composed&&t.lf.contains(i.composedPath()[0])||i.target&&t.lf.contains(i.target)||t.ff.Vf())};this.if=function(){i.removeEventListener("mousedown",e),i.removeEventListener("touchstart",e)},i.addEventListener("mousedown",e),i.addEventListener("touchstart",e,{passive:!0}),this.lf.addEventListener("mouseleave",this.Cf.bind(this)),this.lf.addEventListener("touchstart",this.Lf.bind(this),{passive:!0}),Ye||this.lf.addEventListener("mousedown",this.Lf.bind(this)),this.zf(),this.lf.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.zf=function(){var t=this;void 0===this.ff.Of&&void 0===this.ff.Pf&&void 0===this.ff.If||(this.lf.addEventListener("touchstart",(function(i){return t.Wf(i.touches)}),{passive:!0}),this.lf.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.sf&&void 0!==t.ff.Pf){var e=$e(i.touches[0],i.touches[1])/t.rf;t.ff.Pf(t.sf,e),en(i)}}),{passive:!1}),this.lf.addEventListener("touchend",(function(i){t.Wf(i.touches)})))},t.prototype.Wf=function(t){1===t.length&&(this.ef=!1),2!==t.length||this.ef||this.Jl?this.Rf():this.jf(t)},t.prototype.jf=function(t){var i=Ke(this.lf);this.sf={m:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,g:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.rf=$e(t[0],t[1]),void 0!==this.ff.Of&&this.ff.Of(),this.vf()},t.prototype.Rf=function(){null!==this.sf&&(this.sf=null,void 0!==this.ff.If&&this.ff.If())},t.prototype.Cf=function(t){this.nf&&this.nf();var i=this.Mf(t);this.bf(i,this.ff.Uf)},t.prototype.Bf=function(t){var i=this.Mf(t);this.bf(i,this.ff.qf),this.tf=!0,this.Jl=!0},t.prototype.bf=function(t,i){i&&i.call(this.ff,t)},t.prototype.Mf=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var e=Ke(this.lf);return{Hf:i.clientX,Yf:i.clientY,yf:i.pageX,kf:i.pageY,Kf:i.screenX,$f:i.screenY,Xf:i.clientX-e.left,Zf:i.clientY-e.top,Jf:t.ctrlKey,Gf:t.altKey,Qf:t.shiftKey,tc:t.metaKey,ic:t.type.startsWith("mouse")?"mouse":"touch",nc:t.view}},t}();function Ke(t){return t.getBoundingClientRect()||{left:0,top:0}}function $e(t,i){var e=t.clientX-i.clientX,n=t.clientY-i.clientY;return Math.sqrt(e*e+n*n)}function tn(t){return Boolean(t.touches)}function en(t){t.cancelable&&t.preventDefault()}var nn=function(){function t(t,i,e,n){this.xu=new oe(200),this.se=0,this.hc="",this.Vu="",this.gu=[],this.sc=new Map,this.se=t,this.hc=i,this.Vu=Ei(t,e,n)}return t.prototype.an=function(){delete this.xu,this.gu=[],this.sc.clear()},t.prototype.rc=function(t,i,e,n,r){var s=this.ec(t,i);if("left"!==r){var o=Xe(t.canvas);e-=Math.floor(s.uc*o)}n-=Math.floor(s.wt/2),t.drawImage(s.ac,e,n,s.dt,s.wt)},t.prototype.ec=function(t,i){var e,n=this;if(this.sc.has(i))e=nt(this.sc.get(i));else{if(this.gu.length>=200){var r=nt(this.gu.shift());this.sc.delete(r)}var s=Xe(t.canvas),o=Math.ceil(this.se/4.5),h=Math.round(this.se/10),a=Math.ceil(this.xu.Bt(t,i)),u=Ht(Math.round(a+2*o)),l=Ht(this.se+2*o),c=Qe(document,new Ae(u,l));e={Lt:i,uc:Math.round(Math.max(1,a)),dt:Math.ceil(u*s),wt:Math.ceil(l*s),ac:c},0!==a&&(this.gu.push(e.Lt),this.sc.set(e.Lt,e)),Ot(t=Je(e.ac),s,(function(){t.font=n.Vu,t.fillStyle=n.hc,t.fillText(i,0,l-o-h)}))}return e},t}(),rn=function(){function t(t,i,e,n){var r=this;this.Jt=null,this.oc=null,this.lc=null,this.fc=!1,this.cc=new oe(50),this.vc=new nn(11,"#000"),this.hc=null,this.Vu=null,this._c=0,this.dc=function(){r.wc(r.ol.P()),r._i.Mc().ct().Lr()},this.bc=function(){r._i.Mc().ct().Lr()},this._i=t,this.xi=i,this.ol=e,this.mc="left"===n,this.gc=document.createElement("div"),this.gc.style.height="100%",this.gc.style.overflow="hidden",this.gc.style.width="25px",this.gc.style.left="0",this.gc.style.position="relative",this.pc=Ue(this.gc,new Ae(16,16)),this.pc.subscribeCanvasConfigured(this.dc);var s=this.pc.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.yc=Ue(this.gc,new Ae(16,16)),this.yc.subscribeCanvasConfigured(this.bc);var o=this.yc.canvas;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";var h={Ff:this.kc.bind(this),Sf:this.xc.bind(this),Vf:this.Nc.bind(this),Tf:this.Sc.bind(this),Af:this.Dc.bind(this),mf:this.Cc.bind(this),Uf:this.Tc.bind(this)};this.Ac=new Ze(this.yc.canvas,h,{xf:!1,Nf:!0})}return t.prototype.an=function(){this.Ac.an(),this.yc.unsubscribeCanvasConfigured(this.bc),this.yc.destroy(),this.pc.unsubscribeCanvasConfigured(this.dc),this.pc.destroy(),null!==this.Jt&&this.Jt.Rh().rn(this),this.Jt=null,null!==this.lc&&(clearTimeout(this.lc),this.lc=null),this.vc.an()},t.prototype.Ec=function(){return this.gc},t.prototype.Lc=function(){return this.xi.backgroundColor},t.prototype.N=function(){return rt(this.Jt).P().borderColor},t.prototype.Bc=function(){return this.xi.textColor},t.prototype.Vt=function(){return this.xi.fontSize},t.prototype.Fc=function(){return Ei(this.Vt(),this.xi.fontFamily)},t.prototype.Vc=function(){var t=this.ol.P(),i=this.hc!==t.et,e=this.Vu!==t.kt;return(i||e)&&(this.wc(t),this.hc=t.et),e&&(this.cc.pu(),this.Vu=t.kt),t},t.prototype.zc=function(){if(null===this.Jt)return 0;var t=34,i=this.Vc(),e=Je(this.pc.canvas),n=this.Jt.Vn();e.font=this.Fc(),n.length>0&&(t=Math.max(this.cc.Bt(e,n[0].Ln),this.cc.Bt(e,n[n.length-1].Ln)));for(var r=this.Oc(),s=r.length;s--;){var o=this.cc.Bt(e,r[s].Lt());o>t&&(t=o)}var h=Math.ceil(i.Dt+i.St+i.At+i.Et+t);return h+h%2},t.prototype.Pc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.oc&&this.oc.fn(t)||(this.oc=t,this.pc.resizeCanvas({width:t.ht,height:t.st}),this.yc.resizeCanvas({width:t.ht,height:t.st}),this.gc.style.width=t.ht+"px",this.gc.style.height=t.st+"px",this.gc.style.minWidth=t.ht+"px")},t.prototype.Ic=function(){return rt(this.oc).ht},t.prototype.li=function(t){this.Jt!==t&&(null!==this.Jt&&this.Jt.Rh().rn(this),this.Jt=t,t.Rh().tn(this.Hn.bind(this),this))},t.prototype.X=function(){return this.Jt},t.prototype.pu=function(){var t=this._i.Wc();this._i.Mc().ct().Uo(t,rt(this.X()))},t.prototype.Rc=function(t){if(null!==this.oc){if(1!==t){var i=Je(this.pc.canvas);this.jc(),this.Uc(i,this.pc.pixelRatio),this.uu(i,this.pc.pixelRatio),this.qc(i,this.pc.pixelRatio),this.Hc(i,this.pc.pixelRatio)}var e=Je(this.yc.canvas),n=this.oc.ht,r=this.oc.st;Ot(e,this.yc.pixelRatio,(function(){e.clearRect(0,0,n,r)})),this.Yc(e,this.yc.pixelRatio)}},t.prototype.Kc=function(){return this.pc.canvas},t.prototype.kc=function(t){if(null!==this.Jt&&!this.Jt.Qt()&&this._i.Mc().P().handleScale.axisPressedMouseMove.price){var i=this._i.Mc().ct(),e=this._i.Wc();this.fc=!0,i.zo(e,this.Jt,t.Zf)}},t.prototype.xc=function(t){if(null!==this.Jt&&this._i.Mc().P().handleScale.axisPressedMouseMove.price){var i=this._i.Mc().ct(),e=this._i.Wc(),n=this.Jt;i.Oo(e,n,t.Zf)}},t.prototype.Nc=function(){if(null!==this.Jt&&this._i.Mc().P().handleScale.axisPressedMouseMove.price){var t=this._i.Mc().ct(),i=this._i.Wc(),e=this.Jt;this.fc&&(this.fc=!1,t.Po(i,e))}},t.prototype.Sc=function(t){if(null!==this.Jt&&this._i.Mc().P().handleScale.axisPressedMouseMove.price){var i=this._i.Mc().ct(),e=this._i.Wc();this.fc=!1,i.Po(e,this.Jt)}},t.prototype.Dc=function(t){this._i.Mc().P().handleScale.axisDoubleClickReset&&this.pu()},t.prototype.Cc=function(t){null!==this.Jt&&(!this._i.Mc().ct().P().handleScale.axisPressedMouseMove.price||this.Jt.vh()||this.Jt._h()||this.$c(1))},t.prototype.Tc=function(t){this.$c(0)},t.prototype.Oc=function(){var t=this,i=[],e=null===this.Jt?void 0:this.Jt;return function(n){for(var r=0;r<n.length;++r)for(var s=n[r].fi(t._i.Wc(),e),o=0;o<s.length;o++)i.push(s[o])}(this._i.Wc().zh()),i},t.prototype.Uc=function(t,i){var e=this;if(null!==this.oc){var n=this.oc.ht,r=this.oc.st;Ot(t,i,(function(){Et(t,0,0,n,r,e.Lc())}))}},t.prototype.uu=function(t,i){if(null!==this.oc&&null!==this.Jt&&this.Jt.P().borderVisible){t.save(),t.fillStyle=this.N();var e,n=Math.max(1,Math.floor(this.Vc().Dt*i));e=this.mc?Math.floor(this.oc.ht*i)-n:0,t.fillRect(e,0,n,Math.ceil(this.oc.st*i)),t.restore()}},t.prototype.qc=function(t,i){if(null!==this.oc&&null!==this.Jt){var e=this.Jt.Vn();t.save(),t.strokeStyle=this.N(),t.font=this.Fc(),t.fillStyle=this.N();var n=this.Vc(),r=this.Jt.P().borderVisible&&this.Jt.P().drawTicks,s=this.mc?Math.floor((this.oc.ht-n.St)*i-n.Dt*i):Math.floor(n.Dt*i),o=this.mc?Math.round(s-n.At*i):Math.round(s+n.St*i+n.At*i),h=this.mc?"right":"left",a=Math.max(1,Math.floor(i)),u=Math.floor(.5*i);if(r){var l=Math.round(n.St*i);t.beginPath();for(var c=0,f=e;c<f.length;c++){var p=f[c];t.rect(s,Math.round(p.En*i)-u,l,a)}t.fill()}t.fillStyle=this.Bc();for(var v=0,d=e;v<d.length;v++)p=d[v],this.vc.rc(t,p.Ln,o,Math.round(p.En*i),h);t.restore()}},t.prototype.jc=function(){if(null!==this.oc&&null!==this.Jt){var t=this.oc.st/2,i=[],e=this.Jt.zh().slice(),n=this._i.Wc(),r=this.Vc();this.Jt===n.Di()&&this._i.Wc().zh().forEach((function(t){n.Tu(t)&&e.push(t)}));var s=this.Jt.Vh()[0],o=this.Jt;e.forEach((function(e){var r=e.fi(n,o);r.forEach((function(t){t.Yt(null),t.Kt()&&i.push(t)})),s===e&&r.length>0&&(t=r[0].zt())}));var h=i.filter((function(i){return i.zt()<=t})),a=i.filter((function(i){return i.zt()>t}));if(h.sort((function(t,i){return i.zt()-t.zt()})),h.length&&a.length&&a.push(h[0]),a.sort((function(t,i){return t.zt()-i.zt()})),i.forEach((function(t){return t.Yt(t.zt())})),this.Jt.P().alignLabels){for(var u=1;u<h.length;u++){var l=h[u],c=(p=h[u-1]).wt(r,!1);l.zt()>(v=p.Ht())-c&&l.Yt(v-c)}for(var f=1;f<a.length;f++){var p,v;l=a[f],c=(p=a[f-1]).wt(r,!0),l.zt()<(v=p.Ht())+c&&l.Yt(v+c)}}}},t.prototype.Hc=function(t,i){var e=this;if(null!==this.oc){t.save();var n=this.oc,r=this.Oc(),s=this.Vc(),o=this.mc?"right":"left";r.forEach((function(r){if(r.$t()){var h=r.I(rt(e.Jt));t.save(),h.h(t,s,e.cc,n.ht,o,i),t.restore()}})),t.restore()}},t.prototype.Yc=function(t,i){var e=this;if(null!==this.oc&&null!==this.Jt){t.save();var n=this.oc,r=this._i.Mc().ct(),s=[],o=this._i.Wc(),h=r.Nl().fi(o,this.Jt);h.length&&s.push(h);var a=this.Vc(),u=this.mc?"right":"left";s.forEach((function(r){r.forEach((function(r){t.save(),r.I(rt(e.Jt)).h(t,a,e.cc,n.ht,u,i),t.restore()}))})),t.restore()}},t.prototype.$c=function(t){this.gc.style.cursor=1===t?"ns-resize":"default"},t.prototype.Hn=function(){var t=this,i=this.zc();if(this._c<i){var e=this._i.Mc();null===this.lc&&(this.lc=setTimeout((function(){e&&e.ct()._l(),t.lc=null}),100))}this._c=i},t.prototype.wc=function(t){this.vc.an(),this.vc=new nn(t.Vt,t.et,t.he)},t}(),sn=He,on=function(){function t(t,i){var e=this;this.oc=new Ae(0,0),this.Xc=null,this.Zc=null,this.Jc=null,this.Gc=!1,this.Qc=new Wt,this.tv=0,this.iv=!1,this.nv=null,this.hv=!1,this.sv=null,this.dc=function(){return e.rv&&e.hi().Lr()},this.bc=function(){return e.rv&&e.hi().Lr()},this.ev=t,this.rv=i,this.rv.Yo().tn(this.uv.bind(this),this,!0),this.av=document.createElement("td"),this.av.style.padding="0",this.av.style.position="relative";var n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.ov=document.createElement("td"),this.ov.style.padding="0",this.lv=document.createElement("td"),this.lv.style.padding="0",this.av.appendChild(n),this.pc=Ue(n,new Ae(16,16)),this.pc.subscribeCanvasConfigured(this.dc);var r=this.pc.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.yc=Ue(n,new Ae(16,16)),this.yc.subscribeCanvasConfigured(this.bc);var s=this.yc.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.fv=document.createElement("tr"),this.fv.appendChild(this.ov),this.fv.appendChild(this.av),this.fv.appendChild(this.lv),this.cv();var o=this.Mc().P().handleScroll;this.Ac=new Ze(this.yc.canvas,this,{xf:!o.vertTouchDrag,Nf:!o.horzTouchDrag})}return t.prototype.an=function(){null!==this.Xc&&this.Xc.an(),null!==this.Zc&&this.Zc.an(),this.yc.unsubscribeCanvasConfigured(this.bc),this.yc.destroy(),this.pc.unsubscribeCanvasConfigured(this.dc),this.pc.destroy(),null!==this.rv&&this.rv.Yo().rn(this),this.Ac.an()},t.prototype.Wc=function(){return rt(this.rv)},t.prototype.vv=function(i){null!==this.rv&&this.rv.Yo().rn(this),this.rv=i,null!==this.rv&&this.rv.Yo().tn(t.prototype.uv.bind(this),this,!0),this.cv()},t.prototype.Mc=function(){return this.ev},t.prototype.Ec=function(){return this.fv},t.prototype.cv=function(){if(null!==this.rv&&(this._v(),0!==this.hi().F().length)){if(null!==this.Xc){var t=this.rv.Fo();this.Xc.li(rt(t))}if(null!==this.Zc){var i=this.rv.Vo();this.Zc.li(rt(i))}}},t.prototype.Do=function(){return null!==this.rv?this.rv.Do():0},t.prototype.Co=function(t){this.rv&&this.rv.Co(t)},t.prototype.mf=function(t){if(this.rv){var i=t.Xf,e=t.Zf;Ye||this.dv(i,e)}},t.prototype.Ff=function(t){if(this.iv=!1,this.hv=null!==this.nv,this.rv){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)rt(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var e=this.hi();if(!this.rv.Di().Qt()&&!e.j().Qt()){if(null!==this.nv){var n=e.Nl();this.sv={x:n.Mt(),y:n.bt()},this.nv={x:t.Xf,y:t.Zf}}Ye||this.dv(t.Xf,t.Zf)}}},t.prototype.gf=function(t){if(this.rv){var i=t.Xf,e=t.Zf;if(this.wv()&&this.Mv(),!Ye){this.dv(i,e);var n=this.zu(i,e);this.hi().bl(n&&{ml:n.ml,bv:n.bv}),null!==n&&void 0!==n.nc.mv&&n.nc.mv(i,e)}}},t.prototype.Ef=function(t){if(null!==this.rv){var i=t.Xf,e=t.Zf,n=this.zu(i,e);if(null!==n&&void 0!==n.nc.gv&&n.nc.gv(i,e),this.Qc.un()){var r=this.hi().Nl().R();this.Qc.en(r,{x:i,y:e})}this.pv()}},t.prototype.Sf=function(t){if(null!==this.rv){var i=this.hi(),e=t.Xf,n=t.Zf;if(null!==this.nv){this.hv=!1;var r=rt(this.sv),s=r.x+(e-this.nv.x),o=r.y+(n-this.nv.y);this.dv(s,o)}else this.wv()||this.dv(e,n);if(!i.j().Qt()){var h=this.ev.P().handleScroll;if(h.pressedMouseMove&&"touch"!==t.ic||(h.horzTouchDrag||h.vertTouchDrag)&&"mouse"!==t.ic){var a=this.rv.Di();null!==this.Jc||this.yv()||(this.Jc={x:t.Hf,y:t.Yf}),null===this.Jc||this.Jc.x===t.Hf&&this.Jc.y===t.Yf||this.Gc||(a.Qt()||i.Io(this.rv,a,t.Zf),i.Ll(t.Xf),this.Gc=!0),this.Gc&&(a.Qt()||i.Wo(this.rv,a,t.Zf),i.Bl(t.Xf))}}}},t.prototype.Tf=function(t){if(null!==this.rv){this.iv=!1;var i=this.hi();if(this.Gc){var e=this.rv.Di();i.Ro(this.rv,e),i.Fl(),this.Jc=null,this.Gc=!1}}},t.prototype.qf=function(t){if(this.iv=!0,null===this.nv&&sn){var i={x:t.Xf,y:t.Zf};this.kv(i,i)}},t.prototype.Uf=function(t){null!==this.rv&&(this.rv.ct().bl(null),He||this.Mv())},t.prototype.xv=function(){return this.Qc},t.prototype.Of=function(){this.tv=1},t.prototype.Pf=function(t,i){if(this.ev.P().handleScale.pinch){var e=5*(i-this.tv);this.tv=i,this.hi().Al(t.m,e)}},t.prototype.zu=function(t,i){var e=this.rv;if(null===e)return null;for(var n=0,r=e.zh();n<r.length;n++){var s=r[n],o=this.Nv(s.ci(e),t,i);if(null!==o)return{ml:s,nc:o.nc,bv:o.bv}}return null},t.prototype.Sv=function(t,i){rt("left"===i?this.Xc:this.Zc).Pc(new Ae(t,this.oc.st))},t.prototype.Dv=function(){return this.oc},t.prototype.Pc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.oc.fn(t)||(this.oc=t,this.pc.resizeCanvas({width:t.ht,height:t.st}),this.yc.resizeCanvas({width:t.ht,height:t.st}),this.av.style.width=t.ht+"px",this.av.style.height=t.st+"px")},t.prototype.Cv=function(){var t=rt(this.rv);t.Bo(t.Fo()),t.Bo(t.Vo());for(var i=0,e=t.Vh();i<e.length;i++){var n=e[i];if(t.Tu(n)){var r=n.X();null!==r&&t.Bo(r),n.Wi()}}},t.prototype.Kc=function(){return this.pc.canvas},t.prototype.Rc=function(t){if(0!==t&&null!==this.rv){if(t>1&&this.Cv(),null!==this.Xc&&this.Xc.Rc(t),null!==this.Zc&&this.Zc.Rc(t),1!==t){var i=Je(this.pc.canvas);i.save(),this.Uc(i,this.Tv(),this.pc.pixelRatio),this.rv&&(this.Av(i,this.pc.pixelRatio),this.Ev(i,this.pc.pixelRatio),this.Lv(i,this.pc.pixelRatio)),i.restore()}var e=Je(this.yc.canvas);e.clearRect(0,0,Math.ceil(this.oc.ht*this.yc.pixelRatio),Math.ceil(this.oc.st*this.yc.pixelRatio)),this.Bv(e,this.yc.pixelRatio)}},t.prototype.Fv=function(){return this.Xc},t.prototype.Vv=function(){return this.Zc},t.prototype.Tv=function(){return this.ev.P().layout.backgroundColor},t.prototype.uv=function(){null!==this.rv&&this.rv.Yo().rn(this),this.rv=null},t.prototype.Uc=function(t,i,e){var n=this;Ot(t,e,(function(){Et(t,0,0,n.oc.ht,n.oc.st,i)}))},t.prototype.Av=function(t,i){for(var e=rt(this.rv),n=this.hi().kl().ci(e),r=e.wt(),s=e.dt(),o=0,h=n;o<h.length;o++){var a=h[o];t.save();var u=a.I(r,s);null!==u&&u.h(t,i,!1),t.restore()}},t.prototype.Ev=function(t,i){var e=this.hi().xl();this.zv(e,t,i),this.Ov(e,t,i)},t.prototype.Bv=function(t,i){this.Ov(this.hi().Nl(),t,i)},t.prototype.Lv=function(t,i){for(var e=rt(this.rv).zh(),n=0,r=e;n<r.length;n++){var s=r[n];this.zv(s,t,i)}for(var o=0,h=e;o<h.length;o++)s=h[o],this.Ov(s,t,i)},t.prototype.Ov=function(t,i,e){for(var n=rt(this.rv),r=t.ci(n),s=n.wt(),o=n.dt(),h=n.ct().Ml(),a=null!==h&&h.ml===t,u=null!==h&&a&&void 0!==h.bv?h.bv.Ou:void 0,l=0,c=r;l<c.length;l++){var f=c[l].I(s,o);null!==f&&(i.save(),f.h(i,e,a,u),i.restore())}},t.prototype.zv=function(t,i,e){for(var n=rt(this.rv),r=t.ci(n),s=n.wt(),o=n.dt(),h=n.ct().Ml(),a=null!==h&&h.ml===t,u=null!==h&&a&&void 0!==h.bv?h.bv.Ou:void 0,l=0,c=r;l<c.length;l++){var f=c[l].I(s,o);null!==f&&void 0!==f.u&&(i.save(),f.u(i,e,a,u),i.restore())}},t.prototype.Nv=function(t,i,e){for(var n=0,r=t;n<r.length;n++){var s=r[n],o=s.I(this.oc.st,this.oc.ht);if(null!==o&&o.zu){var h=o.zu(i,e);if(null!==h)return{nc:s,bv:h}}}return null},t.prototype._v=function(){if(null!==this.rv){var t=this.ev;t.P().leftPriceScale.visible||null===this.Xc||(this.ov.removeChild(this.Xc.Ec()),this.Xc.an(),this.Xc=null),t.P().rightPriceScale.visible||null===this.Zc||(this.lv.removeChild(this.Zc.Ec()),this.Zc.an(),this.Zc=null);var i=t.ct().jl();t.P().leftPriceScale.visible&&null===this.Xc&&(this.Xc=new rn(this,t.P().layout,i,"left"),this.ov.appendChild(this.Xc.Ec())),t.P().rightPriceScale.visible&&null===this.Zc&&(this.Zc=new rn(this,t.P().layout,i,"right"),this.lv.appendChild(this.Zc.Ec()))}},t.prototype.wv=function(){return sn&&null===this.nv},t.prototype.yv=function(){return sn&&this.iv||null!==this.nv},t.prototype.Pv=function(t){return Math.max(0,Math.min(t,this.oc.ht-1))},t.prototype.Iv=function(t){return Math.max(0,Math.min(t,this.oc.st-1))},t.prototype.dv=function(t,i){this.hi().Pl(this.Pv(t),this.Iv(i),rt(this.rv))},t.prototype.Mv=function(){this.hi().Wl()},t.prototype.pv=function(){this.hv&&(this.nv=null,this.Mv())},t.prototype.kv=function(t,i){this.nv=t,this.hv=!1,this.dv(i.x,i.y);var e=this.hi().Nl();this.sv={x:e.Mt(),y:e.bt()}},t.prototype.hi=function(){return this.ev.ct()},t}(),hn=function(){function t(t,i,e,n){var r=this;this.T=!0,this.oc=new Ae(0,0),this.dc=function(){return r.Rc(3)},this.mc="left"===t,this.ol=e.jl,this.xi=i,this.Wv=n,this.gc=document.createElement("div"),this.gc.style.width="25px",this.gc.style.height="100%",this.gc.style.overflow="hidden",this.pc=Ue(this.gc,new Ae(16,16)),this.pc.subscribeCanvasConfigured(this.dc)}return t.prototype.an=function(){this.pc.unsubscribeCanvasConfigured(this.dc),this.pc.destroy()},t.prototype.Ec=function(){return this.gc},t.prototype.Dv=function(){return this.oc},t.prototype.Pc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.oc.fn(t)||(this.oc=t,this.pc.resizeCanvas({width:t.ht,height:t.st}),this.gc.style.width=t.ht+"px",this.gc.style.minWidth=t.ht+"px",this.gc.style.height=t.st+"px",this.T=!0)},t.prototype.Rc=function(t){if((!(t<3)||this.T)&&0!==this.oc.ht&&0!==this.oc.st){this.T=!1;var i=Je(this.pc.canvas);this.Uc(i,this.pc.pixelRatio),this.uu(i,this.pc.pixelRatio)}},t.prototype.Kc=function(){return this.pc.canvas},t.prototype.uu=function(t,i){if(this.Wv()){var e=this.oc.ht;t.save(),t.fillStyle=this.xi.timeScale.borderColor;var n=Math.floor(this.ol.P().Dt*i),r=this.mc?Math.round(e*i)-n:0;t.fillRect(r,0,n,n),t.restore()}},t.prototype.Uc=function(t,i){var e=this;Ot(t,i,(function(){Et(t,0,0,e.oc.ht,e.oc.st,e.xi.layout.backgroundColor)}))},t}();function an(t,i){return t.Os>i.Os?t:i}var un=function(){function t(t){var i=this;this.Rv=null,this.jv=null,this.ne=null,this.Uv=!1,this.oc=new Ae(0,0),this.dc=function(){return i.ev.ct().Lr()},this.bc=function(){return i.ev.ct().Lr()},this.ev=t,this.xi=t.P().layout,this.qv=document.createElement("tr"),this.Hv=document.createElement("td"),this.Hv.style.padding="0",this.Yv=document.createElement("td"),this.Yv.style.padding="0",this.gc=document.createElement("td"),this.gc.style.height="25px",this.gc.style.padding="0",this.Kv=document.createElement("div"),this.Kv.style.width="100%",this.Kv.style.height="100%",this.Kv.style.position="relative",this.Kv.style.overflow="hidden",this.gc.appendChild(this.Kv),this.pc=Ue(this.Kv,new Ae(16,16)),this.pc.subscribeCanvasConfigured(this.dc);var e=this.pc.canvas;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.yc=Ue(this.Kv,new Ae(16,16)),this.yc.subscribeCanvasConfigured(this.bc);var n=this.yc.canvas;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.qv.appendChild(this.Hv),this.qv.appendChild(this.gc),this.qv.appendChild(this.Yv),this.$v(),this.ev.ct().So().tn(this.$v.bind(this),this),this.Ac=new Ze(this.yc.canvas,this,{xf:!0,Nf:!1})}return t.prototype.an=function(){this.Ac.an(),null!==this.Rv&&this.Rv.an(),null!==this.jv&&this.jv.an(),this.yc.unsubscribeCanvasConfigured(this.bc),this.yc.destroy(),this.pc.unsubscribeCanvasConfigured(this.dc),this.pc.destroy()},t.prototype.Ec=function(){return this.qv},t.prototype.Xv=function(){return this.Rv},t.prototype.Zv=function(){return this.jv},t.prototype.Ff=function(t){if(!this.Uv){this.Uv=!0;var i=this.ev.ct();!i.j().Qt()&&this.ev.P().handleScale.axisPressedMouseMove.time&&i.Tl(t.Xf)}},t.prototype.Vf=function(){var t=this.ev.ct();!t.j().Qt()&&this.Uv&&(this.Uv=!1,this.ev.P().handleScale.axisPressedMouseMove.time&&t.zl())},t.prototype.Sf=function(t){var i=this.ev.ct();!i.j().Qt()&&this.ev.P().handleScale.axisPressedMouseMove.time&&i.Vl(t.Xf)},t.prototype.Tf=function(t){this.Uv=!1;var i=this.ev.ct();i.j().Qt()&&!this.ev.P().handleScale.axisPressedMouseMove.time||i.zl()},t.prototype.Af=function(){this.ev.P().handleScale.axisDoubleClickReset&&this.ev.ct().Ol()},t.prototype.mf=function(t){this.ev.ct().P().handleScale.axisPressedMouseMove.time&&this.$c(1)},t.prototype.Uf=function(t){this.$c(0)},t.prototype.Dv=function(){return this.oc},t.prototype.Jv=function(t,i,e){this.oc&&this.oc.fn(t)||(this.oc=t,this.pc.resizeCanvas({width:t.ht,height:t.st}),this.yc.resizeCanvas({width:t.ht,height:t.st}),this.gc.style.width=t.ht+"px",this.gc.style.height=t.st+"px"),null!==this.Rv&&this.Rv.Pc(new Ae(i,t.st)),null!==this.jv&&this.jv.Pc(new Ae(e,t.st))},t.prototype.Gv=function(){var t=this.Qv();return Math.ceil(t.Dt+t.St+t.Vt+t.Ct+t.Tt)},t.prototype.B=function(){this.ev.ct().j().Vn()},t.prototype.Kc=function(){return this.pc.canvas},t.prototype.Rc=function(t){if(0!==t){if(1!==t){var i=Je(this.pc.canvas);this.Uc(i,this.pc.pixelRatio),this.uu(i,this.pc.pixelRatio),this.qc(i,this.pc.pixelRatio),null!==this.Rv&&this.Rv.Rc(t),null!==this.jv&&this.jv.Rc(t)}var e=Je(this.yc.canvas),n=this.yc.pixelRatio;e.clearRect(0,0,Math.ceil(this.oc.ht*n),Math.ceil(this.oc.st*n)),this.t_([this.ev.ct().Nl()],e,n)}},t.prototype.Uc=function(t,i){var e=this;Ot(t,i,(function(){Et(t,0,0,e.oc.ht,e.oc.st,e.Tv())}))},t.prototype.uu=function(t,i){if(this.ev.P().timeScale.borderVisible){t.save(),t.fillStyle=this.i_();var e=Math.max(1,Math.floor(this.Qv().Dt*i));t.fillRect(0,0,Math.ceil(this.oc.ht*i),e),t.restore()}},t.prototype.qc=function(t,i){var e=this,n=this.ev.ct().j().Vn();if(n&&0!==n.length){var r=n.reduce(an,n[0]).Os;r>30&&r<40&&(r=30),t.save(),t.strokeStyle=this.i_();var s=this.Qv(),o=s.Dt+s.St+s.Ct+s.Vt-s.Ft;t.textAlign="center",t.fillStyle=this.i_();var h=Math.floor(this.Qv().Dt*i),a=Math.max(1,Math.floor(i)),u=Math.floor(.5*i);if(this.ev.ct().j().P().borderVisible){t.beginPath();for(var l=Math.round(s.St*i),c=n.length;c--;){var f=Math.round(n[c].En*i);t.rect(f-u,h,a,l)}t.fill()}t.fillStyle=this.ue(),Ot(t,i,(function(){t.font=e.n_();for(var i=0,s=n;i<s.length;i++)(u=s[i]).Os<r&&t.fillText(u.Ln,u.En,o);t.font=e.h_();for(var h=0,a=n;h<a.length;h++){var u;(u=a[h]).Os>=r&&t.fillText(u.Ln,u.En,o)}}))}},t.prototype.t_=function(t,i,e){for(var n=this.Qv(),r=0,s=t;r<s.length;r++)for(var o=0,h=s[r].vi();o<h.length;o++){var a=h[o];i.save(),a.I().h(i,n,e),i.restore()}},t.prototype.Tv=function(){return this.xi.backgroundColor},t.prototype.i_=function(){return this.ev.P().timeScale.borderColor},t.prototype.ue=function(){return this.xi.textColor},t.prototype.se=function(){return this.xi.fontSize},t.prototype.n_=function(){return Ei(this.se(),this.xi.fontFamily)},t.prototype.h_=function(){return Ei(this.se(),this.xi.fontFamily,"bold")},t.prototype.Qv=function(){null===this.ne&&(this.ne={Dt:1,Ft:NaN,Ct:NaN,Tt:NaN,ni:NaN,St:3,Vt:NaN,kt:"",ii:new oe});var t=this.ne,i=this.n_();if(t.kt!==i){var e=this.se();t.Vt=e,t.kt=i,t.Ct=Math.ceil(e/2.5),t.Tt=t.Ct,t.ni=Math.ceil(e/2),t.Ft=Math.round(this.se()/5),t.ii.pu()}return this.ne},t.prototype.$c=function(t){this.gc.style.cursor=1===t?"ew-resize":"default"},t.prototype.$v=function(){var t=this.ev.ct(),i=t.P();i.leftPriceScale.visible||null===this.Rv||(this.Hv.removeChild(this.Rv.Ec()),this.Rv.an(),this.Rv=null),i.rightPriceScale.visible||null===this.jv||(this.Yv.removeChild(this.jv.Ec()),this.jv.an(),this.jv=null);var e={jl:this.ev.ct().jl()};if(i.leftPriceScale.visible&&null===this.Rv){var n=function(){return i.leftPriceScale.borderVisible&&t.j().P().borderVisible};this.Rv=new hn("left",this.ev.P(),e,n),this.Hv.appendChild(this.Rv.Ec())}i.rightPriceScale.visible&&null===this.jv&&(n=function(){return i.rightPriceScale.borderVisible&&t.j().P().borderVisible},this.jv=new hn("right",this.ev.P(),e,n),this.Yv.appendChild(this.jv.Ec()))},t}(),ln=function(){function t(t,i){this.s_=[],this.r_=0,this.zn=0,this.Hs=0,this.e_=0,this.u_=0,this.a_=null,this.o_=!1,this.Qc=new Wt,this.ul=new Wt,this.xi=i,this.qv=document.createElement("div"),this.qv.classList.add("tv-lightweight-charts"),this.qv.style.overflow="hidden",this.qv.style.width="100%",this.qv.style.height="100%",this.l_=document.createElement("table"),this.l_.setAttribute("cellspacing","0"),this.qv.appendChild(this.l_),this.f_=this.c_.bind(this),this.qv.addEventListener("wheel",this.f_,{passive:!1}),this.hi=new Be(this.al.bind(this),this.xi),this.ct().Sl().tn(this.v_.bind(this),this),this.__=new un(this),this.l_.appendChild(this.__.Ec());var e=this.xi.width,n=this.xi.height;if(0===e||0===n){var r=t.getBoundingClientRect();0===e&&(e=Math.floor(r.width),e-=e%2),0===n&&(n=Math.floor(r.height),n-=n%2)}e=Math.max(70,e),n=Math.max(50,n),this.d_(e,n),this.w_(),t.appendChild(this.qv),this.M_(),this.hi.j().Hr().tn(this.hi._l.bind(this.hi),this),this.hi.So().tn(this.hi._l.bind(this.hi),this)}return t.prototype.ct=function(){return this.hi},t.prototype.P=function(){return this.xi},t.prototype.b_=function(){return this.s_},t.prototype.an=function(){this.qv.removeEventListener("wheel",this.f_),0!==this.r_&&window.cancelAnimationFrame(this.r_),this.hi.Sl().rn(this),this.hi.j().Hr().rn(this),this.hi.So().rn(this),this.hi.an();for(var t=0,i=this.s_;t<i.length;t++){var e=i[t];this.l_.removeChild(e.Ec()),e.xv().rn(this),e.an()}this.s_=[],rt(this.__).an(),null!==this.qv.parentElement&&this.qv.parentElement.removeChild(this.qv),this.ul.an(),this.Qc.an(),delete this.qv},t.prototype.d_=function(t,i,e){if(void 0===e&&(e=!1),this.zn!==i||this.Hs!==t){this.zn=i,this.Hs=t;var n=i+"px",r=t+"px";rt(this.qv).style.height=n,rt(this.qv).style.width=r,this.l_.style.height=n,this.l_.style.width=r,e?this.m_(new Vi(3)):this.hi._l()}},t.prototype.Rc=function(t){void 0===t&&(t=new Vi(3));for(var i=0;i<this.s_.length;i++)this.s_[i].Rc(t.Ne(i).ke);this.__.Rc(t.xe())},t.prototype.eh=function(t){this.hi.eh(t),this.M_();var i=t.width||this.Hs,e=t.height||this.zn;this.d_(i,e)},t.prototype.xv=function(){return this.Qc},t.prototype.Sl=function(){return this.ul},t.prototype.g_=function(){var t=this;null!==this.a_&&(this.m_(this.a_),this.a_=null);var i=this.s_[0],e=Qe(document,new Ae(this.Hs,this.zn)),n=Je(e),r=Xe(e);return Ot(n,r,(function(){var e=0,r=0,s=function(i){for(var s=0;s<t.s_.length;s++){var o=t.s_[s],h=o.Dv().st,a=rt("left"===i?o.Fv():o.Vv()),u=a.Kc();n.drawImage(u,e,r,a.Ic(),h),r+=h}};t.p_()&&(s("left"),e=rt(i.Fv()).Ic()),r=0;for(var o=0;o<t.s_.length;o++){var h=t.s_[o],a=h.Dv(),u=h.Kc();n.drawImage(u,e,r,a.ht,a.st),r+=a.st}e+=i.Dv().ht,t.y_()&&(r=0,s("right"));var l=function(i){var s=rt("left"===i?t.__.Xv():t.__.Zv()),o=s.Dv(),h=s.Kc();n.drawImage(h,e,r,o.ht,o.st)};if(t.xi.timeScale.visible){e=0,t.p_()&&(l("left"),e=rt(i.Fv()).Ic());var c=t.__.Dv();u=t.__.Kc(),n.drawImage(u,e,r,c.ht,c.st),t.y_()&&(e=i.Dv().ht,l("right"),n.restore())}})),e},t.prototype.k_=function(t){return"none"===t||"left"===t&&!this.p_()||"right"===t&&!this.y_()||0===this.s_.length?0:rt("left"===t?this.s_[0].Fv():this.s_[0].Vv()).Ic()},t.prototype.x_=function(){for(var t=0,i=0,e=0,n=0,r=this.s_;n<r.length;n++){var s=r[n];this.p_()&&(i=Math.max(i,rt(s.Fv()).zc())),this.y_()&&(e=Math.max(e,rt(s.Vv()).zc())),t+=s.Do()}var o=this.Hs,h=this.zn,a=Math.max(o-i-e,0),u=this.xi.timeScale.visible?this.__.Gv():0;u%2&&(u+=1);for(var l=0+u,c=h<l?0:h-l,f=c/t,p=0,v=0;v<this.s_.length;++v){(s=this.s_[v]).vv(this.hi.yl()[v]);var d,y=0;y=v===this.s_.length-1?c-p:Math.round(s.Do()*f),p+=d=Math.max(y,2),s.Pc(new Ae(a,d)),this.p_()&&s.Sv(i,"left"),this.y_()&&s.Sv(e,"right"),s.Wc()&&this.hi.Dl(s.Wc(),d)}this.__.Jv(new Ae(a,u),i,e),this.hi.kr(a),this.e_!==i&&(this.e_=i),this.u_!==e&&(this.u_=e)},t.prototype.c_=function(t){var i=t.deltaX/100,e=-t.deltaY/100;if(0!==i&&this.xi.handleScroll.mouseWheel||0!==e&&this.xi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,e*=120;break;case t.DOM_DELTA_LINE:i*=32,e*=32}if(0!==e&&this.xi.handleScale.mouseWheel){var n=Math.sign(e)*Math.min(1,Math.abs(e)),r=t.clientX-this.qv.getBoundingClientRect().left;this.ct().Al(r,n)}0!==i&&this.xi.handleScroll.mouseWheel&&this.ct().El(-80*i)}},t.prototype.m_=function(t){var i=t.xe();if(3===i&&this.N_(),3===i||2===i){for(var e=this.hi.yl(),n=0;n<e.length;n++)t.Ne(n).dh&&e[n].qo();t.De()&&this.hi.j().Kr();var r=t.Ce();null!==r&&this.hi.j().$r(r),this.__.B()}this.Rc(t)},t.prototype.al=function(t){var i=this;null!==this.a_?this.a_.wn(t):this.a_=t,this.o_||(this.o_=!0,this.r_=window.requestAnimationFrame((function(){i.o_=!1,i.r_=0,null!==i.a_&&(i.m_(i.a_),i.a_=null)})))},t.prototype.N_=function(){this.w_()},t.prototype.w_=function(){for(var t=this.hi.yl(),i=t.length,e=this.s_.length,n=i;n<e;n++){var r=nt(this.s_.pop());this.l_.removeChild(r.Ec()),r.xv().rn(this),r.an()}for(n=e;n<i;n++)(r=new on(this,t[n])).xv().tn(this.S_.bind(this),this),this.s_.push(r),this.l_.insertBefore(r.Ec(),this.__.Ec());for(n=0;n<i;n++){var s=t[n];(r=this.s_[n]).Wc()!==s?r.vv(s):r.cv()}this.M_(),this.x_()},t.prototype.D_=function(t,i){var e,n=new Map;if(null!==t&&this.hi.F().forEach((function(i){var e=i.Zu(t);null!==e&&n.set(i,e)})),null!==t){var r=this.hi.j().si(t);null!==r&&(e=r)}var s=this.ct().Ml(),o=null!==s&&s.ml instanceof je?s.ml:void 0,h=null!==s&&void 0!==s.bv?s.bv.Iu:void 0;return{V:e,C_:i||void 0,T_:o,A_:n,E_:h}},t.prototype.S_=function(t,i){var e=this;this.Qc.en((function(){return e.D_(t,i)}))},t.prototype.v_=function(t,i){var e=this;this.ul.en((function(){return e.D_(t,i)}))},t.prototype.M_=function(){var t=this.xi.timeScale.visible?"":"none";this.__.Ec().style.display=t},t.prototype.p_=function(){return this.xi.leftPriceScale.visible},t.prototype.y_=function(){return this.xi.rightPriceScale.visible},t}();function cn(t,i,e){var n=e.value,r={zs:i,V:t,Z:[n,n,n,n]};return"color"in e&&void 0!==e.color&&(r.et=e.color),r}function fn(t,i,e){return{zs:i,V:t,Z:[e.open,e.high,e.low,e.close]}}function pn(t){return void 0!==t.Z}function vn(t){return function(i,e,n){return void 0===(r=n).open&&void 0===r.value?{V:i,zs:e}:t(i,e,n);var r}}var dn={Candlestick:vn(fn),Bar:vn(fn),Area:vn(cn),Histogram:vn(cn),Line:vn(cn)};function yn(t){return dn[t]}function mn(t){return 60*t*60*1e3}function gn(t){return 60*t*1e3}var bn,wn=[{L_:1,Os:20},{L_:(bn=1,1e3*bn),Os:19},{L_:gn(1),Os:20},{L_:gn(5),Os:21},{L_:gn(30),Os:22},{L_:mn(1),Os:30},{L_:mn(3),Os:31},{L_:mn(6),Os:32},{L_:mn(12),Os:33}];function Mn(t,i){if(null!==i){var e=new Date(1e3*i),n=new Date(1e3*t);if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(var r=wn.length-1;r>=0;--r)if(Math.floor(e.getTime()/wn[r].L_)!==Math.floor(n.getTime()/wn[r].L_))return wn[r].Os}return 20}function xn(t){if(!Ti(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Ss:Math.round(i.getTime()/1e3),Ns:t}}function _n(t){if(!Li(t))throw new Error("time must be of type isUTCTimestamp");return{Ss:t}}function Sn(t){return 0===t.length?null:Ti(t[0].time)?xn:_n}function Pn(t){return Li(t)?_n(t):Ti(t)?xn(t):xn(Cn(t))}function Cn(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function Tn(t){ut(t.time)&&(t.time=Cn(t.time))}function Ln(t){return{zs:0,B_:new Map,Wh:t}}var On=function(){function t(){this.F_=new Map,this.V_=new Map,this.z_=new Map,this.O_=[]}return t.prototype.an=function(){this.F_.clear(),this.V_.clear(),this.z_.clear(),this.O_=[]},t.prototype.P_=function(t,i){var e=this;this.z_.has(t)&&this.F_.forEach((function(i){return i.B_.delete(t)}));var n=[];if(0!==i.length){!function(t){t.forEach(Tn)}(i);var r=rt(Sn(i)),s=yn(t.fa());n=i.map((function(i){var n=r(i.time),o=e.F_.get(n.Ss);void 0===o&&(o=Ln(n),e.F_.set(n.Ss,o));var h=s(n,o.zs,i);return o.B_.set(t,h),h}))}return this.I_(),this.W_(t,n),this.R_(t)},t.prototype.Hl=function(t){return this.P_(t,[])},t.prototype.j_=function(t,i){Tn(i);var e=rt(Sn([i]))(i.time),n=this.z_.get(t);if(void 0!==n&&e.Ss<n.Ss)throw new Error("Cannot update oldest data, last time="+n.Ss+", new time="+e.Ss);var r=this.F_.get(e.Ss),s=void 0===r;void 0===r&&(r=Ln(e),this.F_.set(e.Ss,r));var o=yn(t.fa())(e,r.zs,i);r.B_.set(t,o);var h=this.U_(t,o);if(!s){var a=new Map;return null!==h&&a.set(t,h),{q_:a,j:{Dr:this.H_()}}}return this.R_(t)},t.prototype.U_=function(t,i){var e=this.V_.get(t);void 0===e&&(e=[],this.V_.set(t,e));var n=0!==e.length?e[e.length-1]:null,r=null;return null===n||i.V.Ss>n.V.Ss?pn(i)&&(e.push(i),r={_l:!1,Y_:[i]}):pn(i)?(e[e.length-1]=i,r={_l:!1,Y_:[i]}):(e.splice(-1,1),r={_l:!0,Y_:e}),this.z_.set(t,i.V),r},t.prototype.W_=function(t,i){0!==i.length?(this.V_.set(t,i.filter(pn)),this.z_.set(t,i[i.length-1].V)):(this.V_.delete(t),this.z_.delete(t))},t.prototype.I_=function(){var t=new Map;this.F_.forEach((function(i,e){i.B_.size>0&&t.set(e,i)})),this.F_=t},t.prototype.K_=function(t){for(var i=-1,e=0;e<this.O_.length&&e<t.length;++e){var n=this.O_[e],r=t[e];if(n.V.Ss!==r.V.Ss){i=e;break}r.Vs=n.Vs}if(-1===i&&this.O_.length!==t.length&&(i=Math.min(this.O_.length,t.length)),-1===i)return-1;var s=function(i){var e=nt(o.F_.get(t[i].V.Ss));e.zs=i,e.B_.forEach((function(t){t.zs=i}))},o=this;for(e=i;e<t.length;++e)s(e);return function(t,i){void 0===i&&(i=0);for(var e=0===i||0===t.length?null:t[i-1].V.Ss,n=0,r=i;r<t.length;++r){var s=t[r];s.Vs=Mn(s.V.Ss,e),n+=s.V.Ss-(e||s.V.Ss),e=s.V.Ss}if(0===i&&t.length>1){var o=Math.ceil(n/(t.length-1)),h=t[0].V.Ss-o;t[0].Vs=Mn(t[0].V.Ss,h)}}(t,i),this.O_=t,i},t.prototype.H_=function(){var t=0;return this.V_.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].zs))})),t},t.prototype.R_=function(t){var i=Array.from(this.F_.values()).map((function(t){return{Vs:0,V:t.Wh}}));i.sort((function(t,i){return t.V.Ss-i.V.Ss}));var e=this.K_(i),n={q_:new Map,j:{Dr:this.H_()}};if(-1!==e)this.V_.forEach((function(t,i){n.q_.set(i,{Y_:t,_l:!0})})),n.j.X_=this.O_;else{var r=this.V_.get(t);n.q_.set(t,{Y_:r||[],_l:!0})}return n},t}(),En={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0},kn=function(){function t(t){this.ea=t}return t.prototype.applyOptions=function(t){this.ea.eh(t)},t.prototype.options=function(){return this.ea.P()},t.prototype.Z_=function(){return this.ea},t}();function Dn(t){var i=t.overlay,e=function(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)i.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]])}return e}(t,["overlay"]);return i&&(e.priceScaleId=""),e}var zn=function(){function t(t,i,e){this.Ie=t,this.J_=i,this.G_=e}return t.prototype.an=function(){delete this.Ie,delete this.J_},t.prototype.priceFormatter=function(){return this.Ie.$h()},t.prototype.q_=function(){return this.Ie},t.prototype.priceToCoordinate=function(t){var i=this.Ie.q();return null===i?null:this.Ie.X().$(t,i.Z)},t.prototype.coordinateToPrice=function(t){var i=this.Ie.q();return null===i?null:this.Ie.X().Ci(t,i.Z)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new Pi(new Mi(t.from,t.to)).js(),e=this.Ie.qi();if(e.Qt())return null;var n=e.Da(i.rs(),1),r=e.Da(i.es(),-1),s=rt(e.xa()),o=rt(e.Ui());if(null!==n&&null!==r&&n.zs>r.zs)return{barsBefore:t.from-s,barsAfter:o-t.to};var h={barsBefore:null===n||n.zs===s?t.from-s:n.zs-s,barsAfter:null===r||r.zs===o?o-t.to:o-r.zs};return null!==n&&null!==r&&(h.from=n.V.Ns||n.V.Ss,h.to=r.V.Ns||r.V.Ss),h},t.prototype.setData=function(t){this.J_.Q_(this.Ie,t)},t.prototype.update=function(t){this.J_.ho(this.Ie,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return tt(tt({},t),{time:Pn(t.time)})}));this.Ie.uo(i)},t.prototype.applyOptions=function(t){var i=Dn(t);this.Ie.eh(i)},t.prototype.options=function(){return ct(this.Ie.P())},t.prototype.priceScale=function(){return this.G_.priceScale(this.Ie.X().rh())},t.prototype.createPriceLine=function(t){var i=ot(ct(En),t),e=this.Ie.ao(i);return new kn(e)},t.prototype.removePriceLine=function(t){this.Ie.oo(t.Z_())},t}(),Gn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return $(i,t),i.prototype.applyOptions=function(i){pi(i),t.prototype.applyOptions.call(this,i)},i}(zn),jn={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},Vn={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Oi,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Nn={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:Oi},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:tt({},jn),leftPriceScale:tt(tt({},jn),{visible:!1}),rightPriceScale:tt(tt({},jn),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,fixLeftEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0},watermark:Vn,localization:{locale:qe?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},Rn={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},In={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Fn={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},Bn={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},An={color:"#26a69a",base:0},Xn={title:"",lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Jn=function(){function t(t,i){this.td=t,this.nd=i}return t.prototype.an=function(){delete this.td},t.prototype.applyOptions=function(t){this.td.ct().gl(this.nd,t)},t.prototype.options=function(){return this.Jt().P()},t.prototype.width=function(){return Di(this.nd)?this.td.k_("left"===this.nd?"left":"right"):0},t.prototype.Jt=function(){return rt(this.td.ct().pl(this.nd)).X},t}(),Wn=function(){function t(t){this.hd=new Wt,this.Qs=new Wt,this.hi=t,this.bo().Ur().tn(this.sd.bind(this)),this.bo().qr().tn(this.rd.bind(this))}return t.prototype.an=function(){this.bo().Ur().rn(this),this.bo().qr().rn(this),this.hd.an(),delete this.hi},t.prototype.scrollPosition=function(){return this.bo().Fr()},t.prototype.scrollToPosition=function(t,i){i?this.bo().jr(t,1e3):this.bo().cr(t)},t.prototype.scrollToRealTime=function(){this.bo().Rr()},t.prototype.getVisibleRange=function(){var t,i,e=this.bo().Mr();return null===e?null:{from:null!==(t=e.from.Ns)&&void 0!==t?t:e.from.Ss,to:null!==(i=e.to.Ns)&&void 0!==i?i:e.to.Ss}},t.prototype.setVisibleRange=function(t){var i={from:Pn(t.from),to:Pn(t.to)},e=this.bo().pr(i);this.hi.Yl(e)},t.prototype.getVisibleLogicalRange=function(){var t=this.bo().wr();return null===t?null:{from:t.rs(),to:t.es()}},t.prototype.setVisibleLogicalRange=function(t){et(t.from<=t.to,"The from index cannot be after the to index."),this.hi.Yl(t)},t.prototype.resetTimeScale=function(){this.hi.Ol()},t.prototype.fitContent=function(){this.hi.Kr()},t.prototype.timeToCoordinate=function(t){var i=Pn(t),e=this.hi.j(),n=e.vr(i,!1);return null===n?null:e.J(n)},t.prototype.coordinateToTime=function(t){var i,e=this.hi.j(),n=e.Tr(t),r=e.si(n);return null===r?null:null!==(i=r.Ns)&&void 0!==i?i:r.Ss},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.hd.tn(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.hd.sn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.Qs.tn(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.Qs.sn(t)},t.prototype.applyOptions=function(t){this.bo().eh(t)},t.prototype.options=function(){return ct(this.bo().P())},t.prototype.bo=function(){return this.hi.j()},t.prototype.sd=function(){this.hd.un()&&this.hd.en(this.getVisibleRange())},t.prototype.rd=function(){this.Qs.un()&&this.Qs.en(this.getVisibleLogicalRange())},t}();function Qn(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var e=Math.round(t);if(Math.abs(e-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Un(t){return function(t){if(lt(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&lt(t.handleScale.axisPressedMouseMove)){var e=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:e,price:e}}var n=t.handleScroll;lt(n)&&(t.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=ot(t.leftPriceScale,t.priceScale),t.rightPriceScale=ot(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),t}var qn=function(){function t(t,i){var e=this;this.ed=new On,this.ud=new Map,this.ad=new Map,this.od=new Wt,this.ld=new Wt;var n=void 0===i?ct(Nn):ot(ct(Nn),Un(i));this.td=new ln(t,n),this.td.xv().tn((function(t){e.od.un()&&e.od.en(e.fd(t()))}),this),this.td.Sl().tn((function(t){e.ld.un()&&e.ld.en(e.fd(t()))}),this);var r=this.td.ct();this.vd=new Wn(r)}return t.prototype.remove=function(){this.td.xv().rn(this),this.td.Sl().rn(this),this.vd.an(),this.td.an(),delete this.td,this.ud.forEach((function(t,i){i.an()})),this.ud.clear(),this.ad.clear(),this.od.an(),this.ld.an(),this.ed.an(),delete this.ed},t.prototype.resize=function(t,i,e){this.td.d_(t,i,e)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Qn((t=Dn(t)).priceFormat);var i=ot(ct(Xn),Bn,t),e=this.td.ct().Ul("Area",i),n=new zn(e,this,this);return this.ud.set(n,e),this.ad.set(e,n),n},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Qn((t=Dn(t)).priceFormat);var i=ot(ct(Xn),In,t),e=this.td.ct().Ul("Bar",i),n=new zn(e,this,this);return this.ud.set(n,e),this.ad.set(e,n),n},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),pi(t=Dn(t)),Qn(t.priceFormat);var i=ot(ct(Xn),Rn,t),e=this.td.ct().Ul("Candlestick",i),n=new Gn(e,this,this);return this.ud.set(n,e),this.ad.set(e,n),n},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Qn((t=Dn(t)).priceFormat);var i=ot(ct(Xn),An,t),e=this.td.ct().Ul("Histogram",i),n=new zn(e,this,this);return this.ud.set(n,e),this.ad.set(e,n),n},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Qn((t=Dn(t)).priceFormat);var i=ot(ct(Xn),Fn,t),e=this.td.ct().Ul("Line",i),n=new zn(e,this,this);return this.ud.set(n,e),this.ad.set(e,n),n},t.prototype.removeSeries=function(t){var i=nt(this.ud.get(t)),e=this.ed.Hl(i);this.td.ct().Hl(i),this._d(e),this.ud.delete(t),this.ad.delete(i)},t.prototype.Q_=function(t,i){this._d(this.ed.P_(t,i))},t.prototype.ho=function(t,i){this._d(this.ed.j_(t,i))},t.prototype.subscribeClick=function(t){this.od.tn(t)},t.prototype.unsubscribeClick=function(t){this.od.sn(t)},t.prototype.subscribeCrosshairMove=function(t){this.ld.tn(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.ld.sn(t)},t.prototype.priceScale=function(t){return t=t||this.td.ct().Kl(),new Jn(this.td,t)},t.prototype.timeScale=function(){return this.vd},t.prototype.applyOptions=function(t){this.td.eh(Un(t))},t.prototype.options=function(){return this.td.P()},t.prototype.takeScreenshot=function(){return this.td.g_()},t.prototype._d=function(t){var i=this.td.ct();i.Rl(t.j.Dr,t.j.X_),t.q_.forEach((function(t,i){return i.ho(t.Y_,t._l)})),i.Er()},t.prototype.dd=function(t){return nt(this.ad.get(t))},t.prototype.fd=function(t){var i=this,e=new Map;t.A_.forEach((function(t,n){e.set(i.dd(n),t)}));var n=void 0===t.T_?void 0:this.dd(t.T_);return{time:t.V&&(t.V.Ns||t.V.Ss),point:t.C_,hoveredSeries:n,hoveredMarkerId:t.E_,seriesPrices:e}},t}();function Yn(t,i){var e=rt(ut(t)?document.getElementById(t):t);return new qn(e,i)}var Hn=e("72bf"),Zn=e.n(Hn);function Kn(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function $n(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?Kn(Object(e),!0).forEach((function(i){Object(g["a"])(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Kn(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var tr={props:["title","trades","options"],data:function(){return{chart:void 0,chartId:"tradesCandleChart",candleSeries:[],candles:[],markers:[]}},methods:{notifyError:function(t){this.$vs.notify({icon:"error",title:"Error",color:"danger",text:t})},dateToChartTimeMinute:function(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0)},addCandles:function(t){var i=this;if(t&&null!==t&&void 0!==t){var e=Zn.a.stringify(t);this.$http.get("/api/candles?"+e).then((function(t){var e=t.data,n=[];e.forEach((function(t){var e=t.time,r=new Date(Number(e));n.push($n($n({},t),{},{time:new Date(i.dateToChartTimeMinute(r)).getTime()/1e3}))})),i.candles=n,i.candleSeries.setData(n),i.candleSeries.setMarkers(i.createMarkers())})).catch((function(t){i.notifyError(t.message)}))}},createMarkers:function(){var t=this,i=this.trades,e=[];return i&&Array.isArray(i)&&i.forEach((function(i){"long"==i.type?e.push({time:new Date(t.dateToChartTimeMinute(new Date(i.entryTime))).getTime()/1e3,position:"belowBar",shape:"arrowUp",color:"green",text:"Long ".concat(i.entry)}):e.push({time:new Date(t.dateToChartTimeMinute(new Date(i.entryTime))).getTime()/1e3,position:"aboveBar",shape:"arrowDown",color:"red",text:"Short ".concat(i.entry)}),e.push({time:new Date(t.dateToChartTimeMinute(new Date(i.closeTime))).getTime()/1e3,position:"inBar",shape:"circle",color:"blue",text:"Close ".concat(i.close,"(").concat(Number(i.profit).toFixed(2),")")})})),this.markers=e,e}},watch:{options:function(t){this.addCandles(t)}},mounted:function(){this.chart=Yn(document.getElementById(this.chartId),{height:450,timeScale:{timeVisible:!0,borderColor:"#D1D4DC"}}),this.candleSeries=this.chart.addCandlestickSeries(),this.addCandles(this.options)}},ir=tr,er=Object(p["a"])(ir,X,J,!1,null,null,null),nr=er.exports,rr=e("43ca"),sr={components:{StatisticsCardLine:rr["a"],"strategies-list":h["a"],"object-table":a["a"],"trades-table":d,"trades-balances-chart":C,"profit-fee-chart":G,"profits-variation-chart":A,"trade-candle-chart":nr},mounted:function(){var t=this.$route.params.id;t?(this.id=t,this.fetchBacktest(t)):this.notifyError("Error Fetching Data - No ID given")},data:function(){return{id:null,safeties:null,indicators:null,info:{},trades:[],statistics:{roi:0,winRate:0,maximumProfit:0,maximumLoss:0,maximumDrawdown:0,trades:0},uncompletedTrade:{},tradeChartOptions:void 0}},methods:{notifyError:function(t){this.$vs.notify({icon:"error",title:"Error",color:"danger",text:t})},openLoading:function(){this.$vs.loading()},closeLoading:function(){this.$vs.loading.close()},fetchBacktest:function(t){var i=this;this.openLoading(),this.$http.get("/api/backtest/".concat(t)).then((function(t){i.closeLoading();var e=t.data,n=e.trades,r=e.indicators,s=e.safeties,h=e.profitTrades,a=e.unprofitTrades,u=e.period;i.trades=n,i.safeties=s,i.indicators=r,i.info={symbol:e.symbol,exchange:e.exchange,startingBalance:Number(e.amount).toFixed(2),finalBalance:Number(e.balance).toFixed(2),maximumBalance:Number(e.maximumBalance).toFixed(2),minimumBalance:Number(e.minimumBalance).toFixed(2),leverage:e.leverage,exchangeFee:e.exchangeFee,stoploss:e.stopLoss,takeProfit:e.takeProfit,orderType:e.orderType,totalTradesCompleted:e.totalTrades,profitTrades:e.profitTrades,unprofitTrades:e.unprofitTrades,startDate:o()(new Date(e.startDate)).format("DD-MM-YYYY/HH:mm:ss"),endDate:o()(new Date(e.endDate)).format("DD-MM-YYYY/HH:mm:ss"),dateAdded:o()(new Date(e.createdAt)).format("DD-MM-YYYY/HH:mm:ss")},i.statistics={roi:Number(e.roi||0).toFixed(2),winRate:(parseInt(h)/(parseInt(a)+parseInt(h))*100).toFixed(1),maximumProfit:Number(e.maximumProfit).toFixed(2),maximumLoss:Number(e.maximumLoss).toFixed(2),maximumDrawdown:Number(e.maximumDrawdown).toFixed(2),trades:e.trades.length},i.uncompletedTrade={entryTime:o()(new Date(e.entryTime)).format("DD-MM-YYYY/HH:mm:ss"),positionType:e.positionType,positionPrice:e.positionEntry},i.tradeChartOptions={exchange:e.exchange,symbol:e.symbol,startDate:new Date(e.startDate).getTime(),endDate:new Date(e.endDate).getTime(),period:u||"5m"}})).catch((function(t){i.closeLoading(),i.notifyError(t.message)}))}}},or=sr,hr=Object(p["a"])(or,n,r,!1,null,null,null);i["default"]=hr.exports},f1ae:function(t,i,e){"use strict";var n=e("86cc"),r=e("4630");t.exports=function(t,i,e){i in t?n.f(t,i,r(0,e)):t[i]=e}},f234:function(t,i,e){"use strict";var n="%[a-f0-9]{2}",r=new RegExp(n,"gi"),s=new RegExp("("+n+")+","gi");function o(t,i){try{return decodeURIComponent(t.join(""))}catch(r){}if(1===t.length)return t;i=i||1;var e=t.slice(0,i),n=t.slice(i);return Array.prototype.concat.call([],o(e),o(n))}function h(t){try{return decodeURIComponent(t)}catch(n){for(var i=t.match(r),e=1;e<i.length;e++)t=o(i,e).join(""),i=t.match(r);return t}}function a(t){var i={"%FE%FF":"��","%FF%FE":"��"},e=s.exec(t);while(e){try{i[e[0]]=decodeURIComponent(e[0])}catch(u){var n=h(e[0]);n!==e[0]&&(i[e[0]]=n)}e=s.exec(t)}i["%C2"]="�";for(var r=Object.keys(i),o=0;o<r.length;o++){var a=r[o];t=t.replace(new RegExp(a,"g"),i[a])}return t}t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(i){return a(t)}}},f32c:function(t,i,e){"use strict";t.exports=(t,i)=>{if("string"!==typeof t||"string"!==typeof i)throw new TypeError("Expected the arguments to be of type `string`");if(""===i)return[t];const e=t.indexOf(i);return-1===e?[t]:[t.slice(0,e),t.slice(e+i.length)]}}}]);
//# sourceMappingURL=chunk-b463db18.1d64ca00.js.map